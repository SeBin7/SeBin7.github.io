(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,35672,e=>{"use strict";var s=e.i(69287),l=e.i(71317);function r(...e){return e.filter(Boolean).join(" ")}function t(e,s,l){return Math.max(s,Math.min(l,e))}function a(e){return null!=e&&Number.isFinite(e)?`${Math.round(e)}ms`:"—"}let n=[{key:"decode_ms",label:"decode"},{key:"preproc_ms",label:"preproc"},{key:"pre_resize_ms",label:"pre_resize"},{key:"pre_cvt_ms",label:"pre_cvt"},{key:"pre_edges_ms",label:"pre_edges"},{key:"pre_stack_ms",label:"pre_stack"},{key:"net_ms",label:"net(pipe)"},{key:"h2d_norm_ms",label:"h2d_norm"},{key:"infer_ms",label:"infer"},{key:"total_ms",label:"total"}];function i(e){return null!=e&&Number.isFinite(e)?`${e.toFixed(1)}%`:"—"}function c(e){return null!=e&&Number.isFinite(e)?`${Math.round(e)}MB`:"—"}function d(e){return null!=e&&Number.isFinite(e)?`${Math.round(e)}MHz`:"—"}function o(e){return null!=e&&Number.isFinite(e)?`${e.toFixed(e>=10?0:1)}W`:"—"}function u(e){return null!=e&&Number.isFinite(e)?e.toFixed(e>=10?1:2):"—"}function m(e){if(null==e||!Number.isFinite(e))return"—";let s=e/1024;return`${s.toFixed(s>=10?0:1)}GB`}function x(e){return e?.xpu_busy_pct??e?.xpu_render_busy_pct??e?.render_busy_pct}function p(e){return e?.xpu_busy_src?e.xpu_busy_src:e?.source&&e.source.includes("intel_gpu_top")?e.source:void 0}function _(e){return e?.xpu_freq_act_mhz??e?.xpu_freq_mhz}function h(e){return e?.xpu_freq_req_mhz}function b(e,s){let l=e?.engine_util_pct?.[s];return Number.isFinite(Number(l))?Number(l):void 0}function v(e){return b(e,"render_all")??b(e,"render_single")}function g(e){return b(e,"compute_all")}function j(e){return b(e,"copy_all")??b(e,"copy_single")}function N(e){let s=e?.busy_pct;if(Number.isFinite(Number(s)))return Number(s);let l=[v(e),g(e),j(e)].filter(e=>null!=e);return l.length?Math.max(...l):void 0}function y(e){let s=e?.engine_stats_delta;if(!s)return!1;let l=Object.values(s).map(e=>Number(e?.d_activeTime)).filter(e=>Number.isFinite(e));return l.length>0&&l.every(e=>0===e)}function f(e){return e?.xpu_device??e?.device}function k(e){return e?.xpu_engines_busy_pct??e?.engines_busy_pct??null}function w(e){return e?Object.entries(e).map(([e,s])=>[e,Number(s)]).filter(([,e])=>Number.isFinite(e)).sort((e,s)=>s[1]===e[1]?e[0].localeCompare(s[0]):s[1]-e[1]):[]}let z=["Render/3D","Blitter","Video","VideoEnhance"];function $(e){let s=k(e);if(s)return z.map(e=>{let l=s[e];return[e,Number.isFinite(Number(l))?Number(l):void 0]});let l=x(e),r=p(e);return null!=l&&Number.isFinite(Number(l))&&"intel_gpu_top"===r?[["Render/3D",Number(l)],["Blitter",0],["Video",0],["VideoEnhance",0]]:[["Render/3D",void 0],["Blitter",void 0],["Video",void 0],["VideoEnhance",void 0]]}function S(e){if(null==e||!Number.isFinite(e))return"—";let s=e>1e12?e:e>1e9?1e3*e:null;if(null==s)return String(e);try{return new Date(s).toLocaleString()}catch{return String(e)}}function R(e){return null!=e&&Number.isFinite(e)?t(e,0,100):null}function F(e){return(0,s.jsxs)("div",{className:"rounded-2xl border border-black/10 bg-black/5 p-4 text-sm dark:border-white/10 dark:bg-white/5",children:[(0,s.jsx)("div",{className:"font-medium opacity-80",children:e.title}),(0,s.jsx)("div",{className:"mt-2 text-2xl font-semibold tabular-nums",children:e.value}),e.sub?(0,s.jsx)("div",{className:"mt-1 text-xs opacity-70",children:e.sub}):null,null!=e.pct?(0,s.jsx)("div",{className:"mt-3 h-2 w-full rounded-full bg-black/10 dark:bg-white/10",children:(0,s.jsx)("div",{className:"h-2 rounded-full bg-emerald-500/60",style:{width:`${e.pct}%`}})}):null,e.extra?(0,s.jsx)("div",{className:"mt-2",children:e.extra}):null,e.breakdown?(0,s.jsxs)("details",{className:"mt-2 text-xs opacity-70",children:[(0,s.jsx)("summary",{className:"cursor-pointer select-none",children:e.breakdownLabel??"details"}),(0,s.jsx)("div",{className:"mt-2",children:e.breakdown})]}):null]})}function M(e){return e.length?e.reduce((e,s)=>e+s,0)/e.length:null}function q(){let e,b,z=(0,l.useRef)(null),q=(0,l.useRef)(null),E=(0,l.useRef)(null),O=(0,l.useRef)(null),B=(0,l.useRef)(null),T=(0,l.useRef)(null),C=(0,l.useRef)(0),[A,P]=(0,l.useState)(null),[U,L]=(0,l.useState)(null),[D,V]=(0,l.useState)(null),[H,W]=(0,l.useState)(null),[X,I]=(0,l.useState)(null),[K,Z]=(0,l.useState)("sample"),[G,J]=(0,l.useState)(null),[Q,Y]=(0,l.useState)(""),[ee,es]=(0,l.useState)(!1),[el,er]=(0,l.useState)(null),[et,ea]=(0,l.useState)(null),[en,ei]=(0,l.useState)([]),[ec,ed]=(0,l.useState)(null),[eo,eu]=(0,l.useState)("py_xpu"),[em,ex]=(0,l.useState)(null),[ep,e_]=(0,l.useState)({window:30,client_total_ms:null,net_ms:null,server_total_ms:null,fps:null}),eh=(0,l.useRef)([]),eb=(0,l.useRef)([]),ev=(0,l.useRef)([]),eg=(0,l.useRef)(!1),ej=(0,l.useRef)(()=>{});async function eN(){L(null);try{let e=await fetch("/api/roadvision/health",{cache:"no-store"}),s=await e.json().catch(()=>({})),l=!!s?.ok;if(P(l),l)s?.note&&L(String(s.note));else{let e=s?.target?`target=${s.target}`:"",l=s?.status!=null?`status=${s.status}`:"",r=s?.error||s?.detail||"remote health check failed";L([r,e,l].filter(Boolean).join(" · "))}}catch(e){P(!1),L(e?.message??String(e))}}async function ey(e){W(null),I(null);try{let s=await fetch(`/api/roadvision/metrics${e?"?probe=1":""}`,{cache:"no-store"}),l=await s.json().catch(()=>({}));if(!s.ok||l?.ok===!1){let e=l?.error||l?.detail||`HTTP ${s.status}`,r=l?.target?`target=${l.target}`:"",t=l?.status!=null?`status=${l.status}`:"",a=Number(l?.status??s.status);if([404,405,501].includes(a))return void I(`XPU server does not expose metrics endpoint (${a}); using metrics from /infer only.`);W([e,r,t].filter(Boolean).join(" · "));return}let r=l?.metrics??null;V(r&&"object"==typeof r?r:null),C.current=Date.now()}catch(e){W(e instanceof Error?e.message:String(e))}}function ef(e){let s=z.current,l=q.current;if(!s||!l)return;let r=s.clientWidth,t=s.clientHeight;if(r<=0||t<=0)return;let a=window.devicePixelRatio||1;l.width=Math.round(r*a),l.height=Math.round(t*a);let n=l.getContext("2d");if(!n)return;n.setTransform(a,0,0,a,0,0),n.clearRect(0,0,r,t);let i=s.videoWidth||r,c=s.videoHeight||t,d=r/i,o=t/c;for(let s of(n.lineWidth=2,n.font="12px ui-sans-serif, system-ui",e)){let e=s.x1*d,l=s.y1*o,r=(s.x2-s.x1)*d,t=(s.y2-s.y1)*o;n.strokeStyle="rgba(16,185,129,0.95)",n.fillStyle="rgba(16,185,129,0.15)",n.strokeRect(e,l,r,t),n.fillRect(e,l,r,t);let a=s.label?`${s.label}${null!=s.score?` ${(100*s.score).toFixed(0)}%`:""}`:null!=s.score?`${(100*s.score).toFixed(0)}%`:"";if(a){n.fillStyle="rgba(0,0,0,0.7)";let s=n.measureText(a).width;n.fillRect(e,Math.max(0,l-16),s+8,16),n.fillStyle="white",n.fillText(a,e+4,Math.max(12,l-4))}}}async function ek(){let e=z.current,s=E.current;if(!e||!s)return;if(e.paused||e.ended){O.current?.abort(),O.current=null,e.ended&&es(!1);return}if(!e.videoWidth||!e.videoHeight||eg.current)return;eg.current=!0,ea(null);let l=ep.window,r=performance.now(),a=null,n=null,i=new AbortController;O.current?.abort(),O.current=i;try{let l=e.videoWidth,c=e.videoHeight;s.width=l,s.height=c;let d=s.getContext("2d");if(!d)throw Error("canvas ctx unavailable");let o=performance.now();d.drawImage(e,0,0,l,c);let u=performance.now(),m=await new Promise((e,l)=>{s.toBlob(s=>s?e(s):l(Error("failed to encode frame")),"image/jpeg",.7)}),x=performance.now(),p=performance.now(),_=await fetch("/api/roadvision/infer",{method:"POST",headers:{"Content-Type":"image/jpeg","X-RV-Backend":eo},body:m,signal:i.signal}),h=await _.json().catch(()=>({})),b=performance.now();if(ed(h),h?.metrics&&"object"==typeof h.metrics){let e=Date.now(),s=C.current;s>0&&e-s<2500||null!=T.current||V(h.metrics)}if(n="number"==typeof h?.timing?.total_ms?h.timing.total_ms:null,_.ok&&h?.ok!==!1){let e=function(e,s,l){let r=Array.isArray(e?.detections)?e.detections:Array.isArray(e?.boxes)?e.boxes:Array.isArray(e)?e:[],a=[];for(let e of r){let r=Number(e?.x1??e?.xmin??e?.left??e?.[0]),n=Number(e?.y1??e?.ymin??e?.top??e?.[1]),i=Number(e?.x2??e?.xmax??e?.right??e?.[2]),c=Number(e?.y2??e?.ymax??e?.bottom??e?.[3]);if(![r,n,i,c].every(Number.isFinite))continue;let d=i<=1&&c<=1&&r>=0&&n>=0;a.push({x1:t(d?r*s:r,0,s),y1:t(d?n*l:n,0,l),x2:t(d?i*s:i,0,s),y2:t(d?c*l:c,0,l),label:"string"==typeof e?.label?e.label:"string"==typeof e?.class?e.class:void 0,score:Number.isFinite(Number(e?.score??e?.conf))?Number(e?.score??e?.conf):void 0})}return a}(h,l,c);ei(e),ef(e)}else{let e=h?.error?String(h.error):_.ok?"unknown":`HTTP ${_.status}`,s=[];h?.target&&s.push(`target=${String(h.target)}`),h?.cause&&s.push(`cause=${String(h.cause)}`),_.ok||s.push(`status=${_.status}`),Array.isArray(h?.available_backends)&&s.push(`available=${h.available_backends.join(",")}`),h?.hint&&s.push(`hint=${String(h.hint)}`),ea([`bytes=${m.size}`,`backend=${eo}`,"ok=0",`error=${e}`,...s].join(" · ")),ei([]),ef([])}a={capture_ms:u-o,encode_ms:x-u,net_ms:b-p,total_ms:performance.now()-r},ex(a)}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;ea(e instanceof Error?e.message:String(e))}finally{O.current===i&&(O.current=null);let e=performance.now()-r;er(Math.round(e)),eh.current.push(e),eh.current.length>l&&eh.current.shift(),a?.net_ms!=null&&(eb.current.push(a.net_ms),eb.current.length>l&&eb.current.shift()),null!=n&&(ev.current.push(n),ev.current.length>l&&ev.current.shift());let s=M(eh.current),t=M(eb.current),c=M(ev.current);e_(e=>({...e,client_total_ms:s,net_ms:t,server_total_ms:c,fps:s?1e3/s:null})),eg.current=!1}}async function ew(e){let s=z.current;s&&(s.pause(),s.srcObject=null,s.crossOrigin="anonymous",s.src=e,s.load(),await s.play(),ej.current=()=>{s.pause(),s.removeAttribute("src"),s.load()})}function ez(){O.current?.abort(),O.current=null,ej.current?.(),es(!1),ea(null),ei([]),ed(null),ex(null),eh.current=[],eb.current=[],ev.current=[],ef([])}(0,l.useEffect)(()=>{T.current=D},[D]),(0,l.useEffect)(()=>()=>{Q.startsWith("blob:")&&URL.revokeObjectURL(Q)},[Q]),(0,l.useEffect)(()=>{eN(),ey()},[]),(0,l.useEffect)(()=>(ey(),B.current=window.setInterval(()=>ey(),1e3),()=>{null!=B.current&&window.clearInterval(B.current),B.current=null}),[]),(0,l.useEffect)(()=>{if(!ee)return;let e=!1;return(async()=>{let s=Math.max(100,Math.round(1e3/3));for(;!e;)await ek(),await new Promise(e=>setTimeout(e,s))})(),()=>{e=!0,O.current?.abort(),O.current=null}},[ee,K]);let e$=D?D.source?.includes("intel_gpu_top")||null!=D.engines_busy_pct||null!=D.xpu_engines_busy_pct||null!=D.render_busy_pct||null!=D.xpu_render_busy_pct||null!=D.xpu_busy_pct||null!=D.xpu_busy_src||null!=D.xpu_freq_mhz||null!=D.xpu_freq_act_mhz||null!=D.xpu_freq_req_mhz||null!=D.xpu_rc6_pct||null!=D.xpu_power_gpu_w||null!=D.xpu_power_pkg_w?D:D.intel_gpu_top?D.intel_gpu_top:null:null,eS=function(e){let s=k(e);if(s){for(let e of["Render/3D","render_all","render_single","render"]){let l=s[e];if(Number.isFinite(Number(l)))return{name:e,pct:Number(l)}}let e=w(s)[0];if(e)return{name:e[0],pct:e[1]}}let l=x(e);return null!=l&&Number.isFinite(Number(l))?{name:"util",pct:Number(l)}:null}(e$),eR=eS?.pct??x(e$)??void 0,eF=function(e){if(!e)return null;if(e.source?.includes("level_zero")||e.engine_util_pct||e.engine_stats_delta||null!=e.busy_pct)return e;if(e.level_zero_sysman)return e.level_zero_sysman;if(e.level_zero)return e.level_zero;if(e.xpu_ze_engine_util_pct||null!=e.xpu_ze_busy_pct||null!=e.xpu_ze_ok)return{source:"level_zero_sysman",ts:e.ts,ok:e.xpu_ze_ok,busy_pct:e.xpu_ze_busy_pct,engine_util_pct:e.xpu_ze_engine_util_pct,xpu_ze_age_s:e.xpu_ze_age_s,xpu_ze_ok:e.xpu_ze_ok,xpu_ze_freq:e.xpu_ze_freq,xpu_ze_extras_error:e.xpu_ze_extras_error};for(let s of Object.values(e))if(s&&"object"==typeof s&&(s.source?.includes("level_zero")||s.engine_util_pct||s.engine_stats_delta||null!=s.busy_pct))return s;return null}(D),eM=Array.isArray(e=eF?.xpu_ze_freq)&&e.length?e[0]??null:null,eq=(b=eF?.xpu_ze_extras_error)&&"object"==typeof b?Object.keys(b).sort():[];return(0,s.jsx)("main",{className:"min-h-screen bg-[var(--background)] text-[var(--foreground)]",children:(0,s.jsxs)("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-6 px-5 py-10",children:[(0,s.jsxs)("header",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Road Vision (Streaming Demo)"}),(0,s.jsx)("p",{className:"text-sm opacity-80",children:"Browser video → frame capture → XPU inference over Tailscale → overlay"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("a",{href:"/",className:"rounded-lg border border-black/10 bg-black/5 px-3 py-1.5 text-sm hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",children:"Home"}),(0,s.jsx)("a",{href:"/llm",className:"rounded-lg border border-black/10 bg-black/5 px-3 py-1.5 text-sm hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",children:"LLM Demo"}),(0,s.jsxs)("span",{className:r("inline-flex items-center gap-2 rounded-full border px-3 py-1 text-sm",!0===A&&"border-emerald-500/30 bg-emerald-500/10 text-emerald-200",!1===A&&"border-rose-500/30 bg-rose-500/10 text-rose-200",null==A&&"border-black/10 bg-black/5 text-black/60 dark:border-white/10 dark:bg-white/5 dark:text-white/60"),title:U??"",children:["XPU ",!0===A?"OK":!1===A?"DOWN":"…"]}),(0,s.jsx)("button",{onClick:()=>{eN(),ey(!0)},className:"rounded-lg border border-black/10 bg-black/5 px-3 py-1.5 text-sm hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",children:"Refresh"})]})]}),(U||H||et)&&(0,s.jsxs)("div",{className:"rounded-xl border border-rose-500/30 bg-rose-500/10 p-3 text-sm text-rose-200",children:[(0,s.jsx)("div",{className:"font-medium",children:"Error"}),(0,s.jsx)("div",{className:"mt-1 whitespace-pre-wrap opacity-90",children:U??H??et})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("div",{className:"flex items-end justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium opacity-80",children:"XPU Hardware"}),(0,s.jsx)("div",{className:"mt-1 text-xs opacity-70",children:D?.ts!=null?`updated ${S(D.ts)}`:"updated —"})]}),D?(0,s.jsxs)("div",{className:"text-xs opacity-70",children:["source: ",(0,s.jsx)("span",{className:"font-mono",children:"metrics"})]}):(0,s.jsxs)("div",{className:"text-xs opacity-70",children:["enable ",(0,s.jsx)("span",{className:"font-mono",children:"RV_STREAM_METRICS=1"})," on XPU server"]})]}),(0,s.jsxs)("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsx)(F,{title:"CPU (system)",value:i(D?.cpu_sys_pct),pct:R(D?.cpu_sys_pct),sub:[D?.cpu_cores!=null?`cores ${D.cpu_cores}`:null,D?.cpu_load1!=null||D?.cpu_load5!=null||D?.cpu_load15!=null?`load ${u(D?.cpu_load1)} / ${u(D?.cpu_load5)} / ${u(D?.cpu_load15)}`:null].filter(Boolean).join(" · ")||void 0,breakdownLabel:"details",breakdown:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 font-mono tabular-nums",children:[(0,s.jsx)("div",{className:"opacity-70",children:"cpu_sys_pct"}),(0,s.jsx)("div",{className:"text-right",children:i(D?.cpu_sys_pct)}),(0,s.jsx)("div",{className:"opacity-70",children:"cpu_cores"}),(0,s.jsx)("div",{className:"text-right",children:D?.cpu_cores??"—"}),(0,s.jsx)("div",{className:"opacity-70",children:"cpu_load1"}),(0,s.jsx)("div",{className:"text-right",children:u(D?.cpu_load1)}),(0,s.jsx)("div",{className:"opacity-70",children:"cpu_load5"}),(0,s.jsx)("div",{className:"text-right",children:u(D?.cpu_load5)}),(0,s.jsx)("div",{className:"opacity-70",children:"cpu_load15"}),(0,s.jsx)("div",{className:"text-right",children:u(D?.cpu_load15)})]})}),(0,s.jsx)(F,{title:"RAM (system)",value:D?.mem_used_mb!=null&&D?.mem_total_mb!=null?`${m(D.mem_used_mb)} / ${m(D.mem_total_mb)}`:i(D?.mem_sys_pct),pct:R(D?.mem_sys_pct),sub:[D?.mem_avail_mb!=null?`avail ${m(D.mem_avail_mb)}`:null,D?.swap_used_mb!=null&&D?.swap_total_mb!=null?`swap ${m(D.swap_used_mb)} / ${m(D.swap_total_mb)}`:null].filter(Boolean).join(" · ")||void 0,breakdownLabel:"details",breakdown:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 font-mono tabular-nums",children:[(0,s.jsx)("div",{className:"opacity-70",children:"mem_sys_pct"}),(0,s.jsx)("div",{className:"text-right",children:i(D?.mem_sys_pct)}),(0,s.jsx)("div",{className:"opacity-70",children:"mem_total_mb"}),(0,s.jsx)("div",{className:"text-right",children:m(D?.mem_total_mb)}),(0,s.jsx)("div",{className:"opacity-70",children:"mem_used_mb"}),(0,s.jsx)("div",{className:"text-right",children:m(D?.mem_used_mb)}),(0,s.jsx)("div",{className:"opacity-70",children:"mem_avail_mb"}),(0,s.jsx)("div",{className:"text-right",children:m(D?.mem_avail_mb)}),(0,s.jsx)("div",{className:"opacity-70",children:"swap_total_mb"}),(0,s.jsx)("div",{className:"text-right",children:m(D?.swap_total_mb)}),(0,s.jsx)("div",{className:"opacity-70",children:"swap_used_mb"}),(0,s.jsx)("div",{className:"text-right",children:m(D?.swap_used_mb)})]})}),(0,s.jsx)(F,{title:"XPU (intel_gpu_top)",value:i(eR),pct:R(eR),sub:[eS?.name?`engine ${eS.name}`:null,p(e$)?`src ${p(e$)}`:null,e$&&!(!(!e$||"intel_gpu_top"!==p(e$)||!1===e$.xpu_busy_ok||null!=e$.xpu_busy_age_s&&Number.isFinite(Number(e$.xpu_busy_age_s))&&Number(e$.xpu_busy_age_s)>3)&&1)?"unreliable":null,null!=_(e$)||null!=h(e$)?`freq ${d(_(e$)??void 0)} / ${d(h(e$)??void 0)}`:null,e$?.xpu_rc6_pct!=null?`rc6 ${i(e$.xpu_rc6_pct)}`:null,e$?.xpu_power_gpu_w!=null||e$?.xpu_power_pkg_w!=null?`pwr ${o(e$?.xpu_power_gpu_w)} / ${o(e$?.xpu_power_pkg_w)}`:null,e$?.xpu_period_ms!=null?`period ${Math.round(e$.xpu_period_ms)}ms`:null].filter(Boolean).join(" · ")||void 0,extra:(0,s.jsx)("div",{className:"mt-2 grid grid-cols-2 gap-x-6 gap-y-1 font-mono text-xs tabular-nums",children:$(e$).map(([e,l])=>(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"truncate opacity-70",children:e}),(0,s.jsx)("div",{className:"text-right",children:i(l)})]},e))}),breakdownLabel:"engines",breakdown:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-xs opacity-70",children:["Reliable when ",(0,s.jsx)("span",{className:"font-mono",children:"xpu_busy_src=intel_gpu_top"})," and ",(0,s.jsx)("span",{className:"font-mono",children:"xpu_busy_ok=true"})," (and recent)."]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 font-mono tabular-nums",children:[(0,s.jsx)("div",{className:"opacity-70",children:"engine"}),(0,s.jsx)("div",{className:"text-right",children:eS?.name??"—"}),(0,s.jsx)("div",{className:"opacity-70",children:"util"}),(0,s.jsx)("div",{className:"text-right",children:i(eR)}),e$?.xpu_busy_ok!=null?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"busy_ok"}),(0,s.jsx)("div",{className:"text-right",children:String(e$.xpu_busy_ok)})]}):null,e$?.xpu_busy_age_s!=null?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"busy_age"}),(0,s.jsxs)("div",{className:"text-right",children:[Number(e$.xpu_busy_age_s).toFixed(2),"s"]})]}):null,e$?.xpu_busy_error?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"busy_error"}),(0,s.jsx)("div",{className:"text-right",children:String(e$.xpu_busy_error)})]}):null,null!=_(e$)||null!=h(e$)?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"freq"}),(0,s.jsxs)("div",{className:"text-right",children:[d(_(e$)??void 0)," / ",d(h(e$)??void 0)]})]}):null,e$?.xpu_rc6_pct!=null?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"rc6"}),(0,s.jsx)("div",{className:"text-right",children:i(e$.xpu_rc6_pct)})]}):null,e$?.xpu_power_gpu_w!=null||e$?.xpu_power_pkg_w!=null?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"power"}),(0,s.jsxs)("div",{className:"text-right",children:[o(e$?.xpu_power_gpu_w)," / ",o(e$?.xpu_power_pkg_w)]})]}):null,e$?.xpu_period_ms!=null?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"period"}),(0,s.jsxs)("div",{className:"text-right",children:[Math.round(e$.xpu_period_ms),"ms"]})]}):null]}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("div",{className:"text-xs font-medium opacity-70",children:"engines_busy_pct"}),(0,s.jsx)("div",{className:"mt-2 rounded-lg bg-black/5 p-2 font-mono text-xs tabular-nums dark:bg-white/5",children:$(e$).map(([e,l])=>(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("span",{className:"truncate opacity-80",children:e}),(0,s.jsx)("span",{children:i(l)})]},e))})]})]})}),(0,s.jsx)(F,{title:"Level Zero",value:i(N(eF)??void 0),pct:R(N(eF)??void 0),sub:[eF?.source==="level_zero_sysman"?"src level_zero_sysman":null,eF?.device_index!=null?`idx ${eF.device_index}`:null,eF?.ok!=null?`ok ${String(eF.ok)}`:null,eF?.xpu_ze_age_s!=null?`age ${Number(eF.xpu_ze_age_s).toFixed(2)}s`:null,eM?.actual_mhz!=null||eM?.request_mhz!=null?`freq ${d(eM?.actual_mhz)} / ${d(eM?.request_mhz)}`:null,eq.length?`extras_err ${eq.join(",")}`:null,null!=v(eF)?`render ${i(v(eF)??void 0)}`:null,null!=g(eF)?`compute ${i(g(eF)??void 0)}`:null,null!=j(eF)?`copy ${i(j(eF)??void 0)}`:null,y(eF)?"sysman inactive":null].filter(Boolean).join(" · ")||void 0,extra:eF?.engine_util_pct?(0,s.jsx)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 font-mono text-xs tabular-nums",children:w(eF.engine_util_pct).slice(0,6).map(([e,l])=>(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"truncate opacity-70",children:e}),(0,s.jsx)("div",{className:"text-right",children:i(l)})]},e))}):(0,s.jsx)("div",{className:"text-xs opacity-60",children:"no level_zero_sysman payload"}),breakdownLabel:"engines",breakdown:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 font-mono tabular-nums",children:[(0,s.jsx)("div",{className:"opacity-70",children:"util"}),(0,s.jsx)("div",{className:"text-right",children:i(N(eF)??void 0)}),eM?.domain?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"domain"}),(0,s.jsx)("div",{className:"text-right",children:String(eM.domain)})]}):null,eM?.actual_mhz!=null||eM?.request_mhz!=null?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"freq"}),(0,s.jsxs)("div",{className:"text-right",children:[d(eM?.actual_mhz)," / ",d(eM?.request_mhz)]})]}):null,eM?.efficient_mhz!=null?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"efficient"}),(0,s.jsx)("div",{className:"text-right",children:d(eM.efficient_mhz)})]}):null,eF?.device_index!=null?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"device_index"}),(0,s.jsx)("div",{className:"text-right",children:String(eF.device_index)})]}):null,eF?.activity_supported!=null?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"activity_supported"}),(0,s.jsx)("div",{className:"text-right",children:String(eF.activity_supported)})]}):null,y(eF)?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"note"}),(0,s.jsx)("div",{className:"text-right",children:"engine_stats_delta d_activeTime=0 (sysman inactive)"})]}):null]}),eF?.engine_util_pct?(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("div",{className:"text-xs font-medium opacity-70",children:"engine_util_pct"}),(0,s.jsx)("div",{className:"mt-2 max-h-56 overflow-auto rounded-lg bg-black/5 p-2 font-mono text-xs tabular-nums dark:bg-white/5",children:w(eF.engine_util_pct).map(([e,l])=>(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("span",{className:"truncate opacity-80",children:e}),(0,s.jsx)("span",{children:i(l)})]},e))})]}):(0,s.jsx)("div",{className:"mt-3 text-xs opacity-60",children:"no level_zero_sysman payload"}),eF?.xpu_ze_freq?.length?(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("div",{className:"text-xs font-medium opacity-70",children:"xpu_ze_freq"}),(0,s.jsx)("div",{className:"mt-2 max-h-56 overflow-auto rounded-lg bg-black/5 p-2 font-mono text-xs tabular-nums dark:bg-white/5",children:eF.xpu_ze_freq.map((e,l)=>(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1",children:[(0,s.jsxs)("div",{className:"truncate opacity-70",children:[e.domain??"gpu","#",e.index??l]}),(0,s.jsxs)("div",{className:"text-right",children:[d(e.actual_mhz)," / ",d(e.request_mhz)]})]},`${e.domain??"gpu"}-${l}`))})]}):null,eF?.xpu_ze_extras_error&&Object.keys(eF.xpu_ze_extras_error).length?(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("div",{className:"text-xs font-medium opacity-70",children:"level zero extras (unavailable)"}),(0,s.jsx)("div",{className:"mt-2 rounded-lg bg-black/5 p-2 text-xs opacity-80 dark:bg-white/5",children:Object.entries(eF.xpu_ze_extras_error).map(([e,l])=>(0,s.jsxs)("div",{className:"mt-1 first:mt-0",children:[(0,s.jsx)("span",{className:"font-mono opacity-80",children:e}),": ",(0,s.jsx)("span",{className:"opacity-90",children:String(l)})]},e))})]}):null]})})]}),X||y(eF)?(0,s.jsx)("div",{className:"mt-2 text-xs opacity-70",children:X??"Level Zero sysman engine activity not available (engine_stats_delta d_activeTime=0); intel_gpu_top Render/3D utilization is the reliable source."}):null]}),(0,s.jsxs)("section",{className:"grid gap-6 lg:grid-cols-2",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-black/10 bg-black/5 p-5 dark:border-white/10 dark:bg-white/5",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,s.jsx)("div",{className:"text-sm font-medium opacity-80",children:"Input"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:async()=>{ez();try{if("sample"===K)await ew("/samples/normal_road.mp4");else{if(!Q)throw Error("upload a video first");await ew(Q)}es(!0)}catch(e){ea(e instanceof Error?e.message:String(e))}},disabled:ee||"upload"===K&&!Q,className:"rounded-lg border border-black/10 bg-black/10 px-3 py-2 text-sm font-medium hover:bg-black/15 disabled:cursor-not-allowed disabled:opacity-50 dark:border-white/10 dark:bg-white/10 dark:hover:bg-white/15",children:"Start"}),(0,s.jsx)("button",{onClick:ez,disabled:!ee,className:"rounded-lg border border-black/10 bg-black/5 px-3 py-2 text-sm hover:bg-black/10 disabled:cursor-not-allowed disabled:opacity-50 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",children:"Stop"})]})]}),(0,s.jsxs)("div",{className:"mt-4 grid gap-3",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("label",{className:"text-sm opacity-80",children:"Mode"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:r("rounded-lg border px-3 py-2 text-sm","upload"===K?"border-emerald-500/30 bg-emerald-500/10 text-emerald-200":"border-black/10 bg-black/5 hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10"),onClick:()=>Z("upload"),disabled:ee,children:"Upload"}),(0,s.jsx)("button",{className:r("rounded-lg border px-3 py-2 text-sm","sample"===K?"border-emerald-500/30 bg-emerald-500/10 text-emerald-200":"border-black/10 bg-black/5 hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10"),onClick:()=>Z("sample"),disabled:ee,children:"Sample"})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("label",{className:"text-sm opacity-80",children:"Backend"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:r("rounded-lg border px-3 py-2 text-sm","py_xpu"===eo?"border-emerald-500/30 bg-emerald-500/10 text-emerald-200":"border-black/10 bg-black/5 hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10"),onClick:()=>eu("py_xpu"),disabled:ee,children:"py_xpu"}),(0,s.jsx)("button",{className:r("rounded-lg border px-3 py-2 text-sm","py_cpu"===eo?"border-emerald-500/30 bg-emerald-500/10 text-emerald-200":"border-black/10 bg-black/5 hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10"),onClick:()=>eu("py_cpu"),disabled:ee,children:"py_cpu"}),(0,s.jsx)("button",{className:r("rounded-lg border px-3 py-2 text-sm","cpp_hybrid"===eo?"border-emerald-500/30 bg-emerald-500/10 text-emerald-200":"border-black/10 bg-black/5 hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10"),onClick:()=>eu("cpp_hybrid"),disabled:ee,children:"cpp_hybrid"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("button",{className:r("rounded-lg border px-3 py-2 text-sm","cpp_cpu"===eo?"border-emerald-500/30 bg-emerald-500/10 text-emerald-200":"border-black/10 bg-black/5 hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10"),onClick:()=>eu("cpp_cpu"),disabled:ee,children:"cpp_cpu"}),(0,s.jsx)("button",{className:r("rounded-lg border px-3 py-2 text-sm","cpp_xpu"===eo?"border-emerald-500/30 bg-emerald-500/10 text-emerald-200":"border-black/10 bg-black/5 hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10"),onClick:()=>eu("cpp_xpu"),disabled:ee,children:"cpp_xpu"})]}),(0,s.jsxs)("div",{className:"text-xs opacity-70",children:["Sent as header: ",(0,s.jsxs)("span",{className:"font-mono",children:["X-RV-Backend: ",eo]})]})]}),"upload"===K?(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("label",{className:"text-sm opacity-80",children:"Upload video (mp4/webm)"}),(0,s.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{let s=e.target.files?.[0]??null;J(s),Q.startsWith("blob:")&&URL.revokeObjectURL(Q),Y(s?URL.createObjectURL(s):"")},className:"w-full rounded-lg border border-black/10 bg-[var(--background)] px-3 py-2 text-sm dark:border-white/10",disabled:ee}),(0,s.jsx)("div",{className:"text-xs opacity-70",children:G?(0,s.jsxs)(s.Fragment,{children:["selected: ",(0,s.jsx)("span",{className:"font-mono",children:G.name})," ·"," ",(0,s.jsxs)("span",{className:"font-mono",children:[Math.round(G.size/1024),"KB"]})]}):"no file selected"})]}):null]})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-black/10 bg-black/5 p-5 dark:border-white/10 dark:bg-white/5",children:[(0,s.jsx)("div",{className:"text-sm font-medium opacity-80",children:"Preview"}),(0,s.jsxs)("div",{className:"relative mt-4 overflow-hidden rounded-xl border border-black/10 bg-black/10 dark:border-white/10 dark:bg-white/5",children:[(0,s.jsx)("video",{ref:z,className:"block h-auto w-full",playsInline:!0,muted:!0}),(0,s.jsx)("canvas",{ref:q,className:"pointer-events-none absolute inset-0 h-full w-full"}),(0,s.jsxs)("div",{className:"pointer-events-none absolute left-3 top-3 rounded-lg border border-black/10 bg-black/60 px-3 py-2 text-xs text-white backdrop-blur dark:border-white/10",children:[(0,s.jsxs)("div",{className:"font-medium",children:[ec?.label??"—"," ",ec?.conf!=null?`(${Number(ec.conf).toFixed(2)}%)`:""]}),(0,s.jsxs)("div",{className:"mt-1 opacity-90",children:["backend: ",(0,s.jsx)("span",{className:"font-mono",children:eo})]}),(0,s.jsxs)("div",{className:"mt-1 opacity-90",children:["fps(avg): ",(0,s.jsx)("span",{className:"font-mono",children:null!=ep.fps?ep.fps.toFixed(2):"—"})]})]})]}),(0,s.jsxs)("div",{className:"mt-4 rounded-xl border border-black/10 bg-[var(--background)] p-3 text-sm dark:border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsx)("div",{className:"font-medium opacity-80",children:"Last result"}),(0,s.jsx)("div",{className:"text-xs opacity-70 tabular-nums",children:ec?.timing?.total_ms!=null?`server ${Math.round(ec.timing.total_ms)}ms`:""})]}),(0,s.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,s.jsxs)("span",{className:"rounded-full border border-black/10 bg-black/5 px-2 py-0.5 text-xs dark:border-white/10 dark:bg-white/5",children:["ok: ",(0,s.jsx)("span",{className:"font-mono",children:String(ec?.ok??"—")})]}),(0,s.jsxs)("span",{className:"rounded-full border border-black/10 bg-black/5 px-2 py-0.5 text-xs dark:border-white/10 dark:bg-white/5",children:["backend: ",(0,s.jsx)("span",{className:"font-mono",children:ec?.backend??"—"})]}),ec?.stage?(0,s.jsxs)("span",{className:"rounded-full border border-black/10 bg-black/5 px-2 py-0.5 text-xs dark:border-white/10 dark:bg-white/5",children:["stage: ",(0,s.jsx)("span",{className:"font-mono",children:ec.stage})]}):null,(0,s.jsxs)("span",{className:"rounded-full border border-black/10 bg-black/5 px-2 py-0.5 text-xs dark:border-white/10 dark:bg-white/5",children:["label: ",(0,s.jsx)("span",{className:"font-mono",children:ec?.label??"—"})]}),(0,s.jsxs)("span",{className:"rounded-full border border-black/10 bg-black/5 px-2 py-0.5 text-xs dark:border-white/10 dark:bg-white/5",children:["conf:"," ",(0,s.jsx)("span",{className:"font-mono",children:ec?.conf!=null?`${Number(ec.conf).toFixed(3)}%`:"—"})]})]}),(0,s.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-2 text-xs",children:[(0,s.jsxs)("div",{className:"rounded-lg border border-black/10 bg-black/5 px-3 py-2 dark:border-white/10 dark:bg-white/5",children:[(0,s.jsx)("div",{className:"opacity-70",title:"현재 프레임 1장의 브라우저 측 측정값 (캡처/인코딩/네트워크 포함)",children:"client"}),(0,s.jsxs)("div",{className:"mt-1 font-mono",children:["total ",a(em?.total_ms)," · net ",a(em?.net_ms)]}),(0,s.jsxs)("div",{className:"mt-1 font-mono",children:["cap ",a(em?.capture_ms)," · enc ",a(em?.encode_ms)]})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-black/10 bg-black/5 px-3 py-2 dark:border-white/10 dark:bg-white/5",children:[(0,s.jsxs)("div",{className:"opacity-70",title:`최근 ${ep.window}프레임의 롤링 평균 (client total/net + server total, fps=1000/avg total)`,children:["avg (",ep.window,")"]}),(0,s.jsxs)("div",{className:"mt-1 font-mono",children:["total ",a(ep.client_total_ms)," · net ",a(ep.net_ms)]}),(0,s.jsxs)("div",{className:"mt-1 font-mono",children:["server ",a(ep.server_total_ms)," · fps ",null!=ep.fps?ep.fps.toFixed(2):"—"]})]})]}),ec?.timing?(0,s.jsxs)("details",{className:"mt-3 text-xs",open:!0,children:[(0,s.jsx)("summary",{className:"cursor-pointer select-none opacity-70",children:"timing"}),(0,s.jsx)("div",{className:"mt-2 rounded-lg border border-black/10 bg-black/5 p-3 dark:border-white/10 dark:bg-white/5",children:(0,s.jsx)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 font-mono tabular-nums",children:n.filter(e=>{var s,l;return s=ec.timing,l=e.key,null!=s&&Object.prototype.hasOwnProperty.call(s,l)}).map(e=>{var l,r;return(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:e.label}),(0,s.jsx)("div",{children:(l=ec.timing,r=e.key,a(l?.[r]))})]},e.key)})})})]}):null,D?(0,s.jsxs)("details",{className:"mt-3 text-xs",open:!0,children:[(0,s.jsx)("summary",{className:"cursor-pointer select-none opacity-70",children:"metrics"}),(0,s.jsx)("div",{className:"mt-2 rounded-lg border border-black/10 bg-black/5 p-3 dark:border-white/10 dark:bg-white/5",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 font-mono tabular-nums",children:[null!=D.ts?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"ts"}),(0,s.jsx)("div",{children:S(D.ts)})]}):null,null!=D.cpu_sys_pct?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"cpu_sys"}),(0,s.jsx)("div",{children:i(D.cpu_sys_pct)})]}):null,null!=D.cpu_cores?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"cpu_cores"}),(0,s.jsx)("div",{children:String(D.cpu_cores)})]}):null,null!=D.cpu_load1||null!=D.cpu_load5||null!=D.cpu_load15?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"cpu_load"}),(0,s.jsxs)("div",{children:[u(D.cpu_load1)," / ",u(D.cpu_load5)," / ",u(D.cpu_load15)]})]}):null,null!=D.mem_sys_pct?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"mem_sys"}),(0,s.jsx)("div",{children:i(D.mem_sys_pct)})]}):null,null!=D.mem_total_mb?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"mem_total"}),(0,s.jsx)("div",{children:m(D.mem_total_mb)})]}):null,null!=D.mem_used_mb?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"mem_used"}),(0,s.jsx)("div",{children:m(D.mem_used_mb)})]}):null,null!=D.mem_avail_mb?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"mem_avail"}),(0,s.jsx)("div",{children:m(D.mem_avail_mb)})]}):null,null!=D.swap_total_mb||null!=D.swap_used_mb?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"swap"}),(0,s.jsxs)("div",{children:[m(D.swap_used_mb)," / ",m(D.swap_total_mb)]})]}):null,null!=x(D)?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_busy"}),(0,s.jsx)("div",{children:i(x(D)??void 0)})]}):null,null!=D.xpu_busy_ok?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_busy_ok"}),(0,s.jsx)("div",{children:String(D.xpu_busy_ok)})]}):null,D.xpu_busy_error?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_busy_error"}),(0,s.jsx)("div",{children:String(D.xpu_busy_error)})]}):null,null!=D.xpu_busy_age_s?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_busy_age_s"}),(0,s.jsxs)("div",{children:[Number(D.xpu_busy_age_s).toFixed(2),"s"]})]}):null,null!=D.xpu_ze_ok?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_ze_ok"}),(0,s.jsx)("div",{children:String(D.xpu_ze_ok)})]}):null,null!=D.xpu_ze_age_s?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_ze_age_s"}),(0,s.jsxs)("div",{children:[Number(D.xpu_ze_age_s).toFixed(2),"s"]})]}):null,D.xpu_ze_extras_error&&Object.keys(D.xpu_ze_extras_error).length?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_ze_extras_error"}),(0,s.jsx)("div",{children:Object.keys(D.xpu_ze_extras_error).sort().join(",")})]}):null,null!=p(D)?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_busy_src"}),(0,s.jsx)("div",{children:String(p(D))})]}):null,null!=f(D)?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_device"}),(0,s.jsx)("div",{children:String(f(D))})]}):null,null!=_(D)||null!=h(D)?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_freq"}),(0,s.jsxs)("div",{children:[d(_(D)??void 0)," / ",d(h(D)??void 0)]})]}):null,null!=D.xpu_rc6_pct?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_rc6"}),(0,s.jsx)("div",{children:i(D.xpu_rc6_pct)})]}):null,null!=D.xpu_power_gpu_w?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_power_gpu"}),(0,s.jsx)("div",{children:o(D.xpu_power_gpu_w)})]}):null,null!=D.xpu_power_pkg_w?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_power_pkg"}),(0,s.jsx)("div",{children:o(D.xpu_power_pkg_w)})]}):null,null!=D.xpu_period_ms?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_period"}),(0,s.jsxs)("div",{children:[Math.round(D.xpu_period_ms),"ms"]})]}):null,null!=D.xpu_vram_used_mb?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_vram_used"}),(0,s.jsx)("div",{children:c(D.xpu_vram_used_mb)})]}):null,null!=D.xpu_vram_total_mb?(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_vram_total"}),(0,s.jsx)("div",{children:c(D.xpu_vram_total_mb)})]}):null,"intel_gpu_top"===p(D)||k(D)?(0,s.jsxs)("div",{className:"col-span-2 mt-2 border-t border-black/10 pt-2 dark:border-white/10",children:[(0,s.jsx)("div",{className:"opacity-70",children:"xpu_engines_busy_pct"}),(0,s.jsx)("div",{className:"mt-1 grid grid-cols-2 gap-x-6 gap-y-1",children:$(D).map(([e,l])=>(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("span",{className:"truncate opacity-80",children:e}),(0,s.jsx)("span",{children:i(l)})]},e))})]}):null]})})]}):null]}),(0,s.jsxs)("div",{className:"mt-3 text-xs opacity-70",children:["API: ",(0,s.jsx)("span",{className:"font-mono",children:"/api/roadvision/infer"})," (Next server proxies to XPU via ",(0,s.jsx)("span",{className:"font-mono",children:"RV_REMOTE_BASE_URL"}),")"]})]})]}),(0,s.jsx)("canvas",{ref:E,className:"hidden"})]})})}e.s(["default",()=>q])}]);