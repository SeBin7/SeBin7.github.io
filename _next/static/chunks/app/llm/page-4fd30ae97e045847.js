(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[294],{4065:(e,a,r)=>{Promise.resolve().then(r.bind(r,6471))},6471:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>c});var s=r(546),t=r(842);let l=[{name:"llama3.1:8b",note:"범용 밸런스"},{name:"gemma2:9b",note:"요약/추론 강점"},{name:"qwen2.5:7b",note:"코딩/툴 작업"},{name:"mistral:7b-instruct",note:"가벼움/속도"},{name:"solar:10.7b",note:"한국어/업무형"}];function d(...e){return e.filter(Boolean).join(" ")}function i(e){return e&&Number.isFinite(e)?Math.round(e/1e6):null}function n(e){if(!e||!Number.isFinite(e))return"";let a=e/0x40000000;return`${a.toFixed(a>=10?0:1)} GB`}function c(){var e;let[a,r]=(0,t.useState)(null),[c,o]=(0,t.useState)(null),[m,b]=(0,t.useState)(null),[u,h]=(0,t.useState)(null),[x,p]=(0,t.useState)([]),[g,k]=(0,t.useState)(!1),[v,j]=(0,t.useState)(null),[N,w]=(0,t.useState)("llama3.2:3b"),[y,f]=(0,t.useState)("llama3.2:3b"),[S,_]=(0,t.useState)("llama3.2:3b"),[C,P]=(0,t.useState)(!1),[M,O]=(0,t.useState)(""),[$,A]=(0,t.useState)(null),[R,T]=(0,t.useState)(null),F=(0,t.useRef)(!1),I=(0,t.useRef)(null),[E,B]=(0,t.useState)("30m"),[J,H]=(0,t.useState)(""),[K,L]=(0,t.useState)(""),[D,z]=(0,t.useState)(""),[G,U]=(0,t.useState)(!0),[q,Q]=(0,t.useState)("hello"),[V,W]=(0,t.useState)(null),[Y,X]=(0,t.useState)(""),[Z,ee]=(0,t.useState)(!1),[ea,er]=(0,t.useState)(null),[es,et]=(0,t.useState)(!0),[el,ed]=(0,t.useState)(!0),ei=(0,t.useRef)(null),en=y.trim()||N,ec=(0,t.useMemo)(()=>x.find(e=>e.name===en)??null,[x,en]),eo=(0,t.useMemo)(()=>x.map(e=>e.name).sort(),[x]),em=(0,t.useMemo)(()=>new Set(eo),[eo]);async function eb(){o(null);try{let e=await fetch("/api/health",{cache:"no-store"}),a=await e.json().catch(()=>({}));if(!e.ok){r(!1),o(a?.detail||a?.error||`HTTP ${e.status}`);return}r(!!a?.ok)}catch(e){r(!1),o(e?.message??String(e))}}async function eu(){k(!0),j(null);try{let e=await fetch("/api/models",{cache:"no-store"}),a=await e.json().catch(()=>({}));if(!e.ok){j(a?.error||`HTTP ${e.status}`),p([]);return}p(Array.isArray(a?.models)?a.models:[])}catch(e){j(e?.message??String(e)),p([])}finally{k(!1)}}async function eh(){h(null);try{let e=await fetch("/api/stats",{cache:"no-store"}),a=await e.json().catch(()=>({}));if(!e.ok)return void h(a?.error||`HTTP ${e.status}`);b(a)}catch(e){h(e?.message??String(e))}}async function ex(e){let a=e.trim();if(!a)return!1;er(null);try{let e=await fetch("/api/models/switch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:a,previous_model:N||void 0,keep_alive:E||void 0})}),r=await e.json().catch(()=>({}));if(!e.ok)return er(r?.error||`HTTP ${e.status}`),!1;return w(a),!0}catch(e){return er(e?.message??String(e)),!1}}function ep(){I.current?.close(),I.current=null,P(!1)}function eg(e){let a=e.trim();if(!a||C)return;T(null),O("connecting..."),A(null),P(!0),F.current=!1,I.current?.close(),I.current=null;let r=new EventSource(`/api/models/pull?model=${encodeURIComponent(a)}`);I.current=r,r.onmessage=e=>{let a=e.data,r={};try{r=JSON.parse(a)}catch{O(a);return}if(r.error){T(r.error),ep();return}r.status&&O(r.status),"number"==typeof r.total&&"number"==typeof r.completed&&r.total>0&&A(Math.min(1,Math.max(0,r.completed/r.total))),"success"===r.status&&(F.current=!0,ep(),eu())},r.onerror=()=>{F.current||(T("pull stream disconnected"),ep())}}async function ek(){if(en.trim()){ee(!0),er(null),W(null),X(""),ei.current?.abort(),ei.current=new AbortController;try{let e;if(el&&N&&en!==N&&!await ex(en))return;let a={},r=Number(J);""!==J&&Number.isFinite(r)&&(a.temperature=r);let s=Number(K);""!==K&&Number.isFinite(s)&&(a.top_p=s);let t=Number(D);""!==D&&Number.isFinite(t)&&(a.num_predict=t);let l=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:en,prompt:q,stream:es,keep_alive:E||void 0,options:Object.keys(a).length?a:void 0,system:G?"You are a helpful assistant. Reply in Korean unless the user explicitly asks for another language.":void 0}),signal:ei.current.signal}),d=l.headers.get("content-type")||"";if(!l.ok){let e=await l.text().catch(()=>"");er(e||`HTTP ${l.status}`);return}if(d.includes("application/x-ndjson")){let e=l.body?.getReader();if(!e)return void er("missing response stream");let a=new TextDecoder,r="";(async()=>{try{for(;;){let s,{value:t,done:l}=await e.read();if(l)break;if(t)for(r+=a.decode(t,{stream:!0});(s=r.indexOf("\n"))>=0;){let e,a=r.slice(0,s).trim();if(r=r.slice(s+1),a){try{e=JSON.parse(a)}catch{continue}"string"==typeof e?.response&&X(a=>a+e.response),W(e)}}}let s=r.trim();if(s)try{let e=JSON.parse(s);"string"==typeof e?.response&&X(a=>a+e.response),W(e)}catch{}}catch(e){if(e?.name==="AbortError")return;er(e?.message??String(e))}finally{ee(!1)}})();return}let i=await l.text();try{e=JSON.parse(i)}catch{e={raw:i}}W(e),X(e?.response??e?.raw??"")}catch(e){if(e?.name==="AbortError")return;er(e?.message??String(e))}finally{es||ee(!1)}}}(0,t.useEffect)(()=>{eb(),eu(),eh();let e=window.setInterval(()=>eh(),2e3);return()=>{window.clearInterval(e),I.current?.close(),I.current=null}},[]);let ev=(0,t.useMemo)(()=>{if(!V)return null;let e=[],a=i(V.total_duration),r=i(V.load_duration),s=i(V.eval_duration),t=i(V.prompt_eval_duration);return null!=a&&e.push({k:"total",v:`${a} ms`}),null!=r&&e.push({k:"load",v:`${r} ms`}),null!=V.prompt_eval_count&&e.push({k:"prompt tokens",v:String(V.prompt_eval_count)}),null!=t&&e.push({k:"prompt eval",v:`${t} ms`}),null!=V.eval_count&&e.push({k:"gen tokens",v:String(V.eval_count)}),null!=s&&e.push({k:"gen eval",v:`${s} ms`}),e},[V]),ej=m?.api??null,eN=m?.system?.memory??null,ew=eN?.used_bytes,ey=eN?.total_bytes,ef=eN?.available_bytes,eS=ew&&ey?Math.round(ew/ey*100):null,e_=m?.ollama??null,eC=e_?.pids??[],eP=e_?.total_rss_bytes,eM=e_?.processes??[];return(0,s.jsx)("main",{className:"min-h-screen bg-[var(--background)] text-[var(--foreground)]",children:(0,s.jsxs)("div",{className:"mx-auto flex w-full max-w-5xl flex-col gap-6 px-5 py-10",children:[(0,s.jsxs)("header",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"LLM Demo"}),(0,s.jsx)("p",{className:"text-sm opacity-80",children:"Next.js UI \xb7 FastAPI proxy \xb7 Ollama local (Mac GPU/Metal)"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("a",{href:"/",className:"rounded-lg border border-black/10 bg-black/5 px-3 py-1.5 text-sm hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",children:"Home"}),(0,s.jsx)("a",{href:"/road-vision",className:"rounded-lg border border-black/10 bg-black/5 px-3 py-1.5 text-sm hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",children:"Road Vision"}),(0,s.jsxs)("span",{className:d("inline-flex items-center gap-2 rounded-full border px-3 py-1 text-sm",!0===a&&"border-emerald-500/30 bg-emerald-500/10 text-emerald-200",!1===a&&"border-rose-500/30 bg-rose-500/10 text-rose-200",null==a&&"border-black/10 bg-black/5 text-black/60 dark:border-white/10 dark:bg-white/5 dark:text-white/60"),title:c??"",children:["API ",!0===a?"OK":!1===a?"DOWN":"…"]}),(0,s.jsx)("button",{onClick:()=>{eb(),eu(),eh()},className:"rounded-lg border border-black/10 bg-black/5 px-3 py-1.5 text-sm hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",children:"Refresh"})]})]}),(c||v||u)&&(0,s.jsxs)("div",{className:"rounded-xl border border-rose-500/30 bg-rose-500/10 p-3 text-sm text-rose-200",children:[(0,s.jsx)("div",{className:"font-medium",children:"Connection error"}),(0,s.jsx)("div",{className:"mt-1 whitespace-pre-wrap opacity-90",children:c??v??u})]})]}),(0,s.jsxs)("section",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-black/10 bg-black/5 p-4 text-sm dark:border-white/10 dark:bg-white/5",children:[(0,s.jsx)("div",{className:"font-medium opacity-80",children:"System RAM"}),(0,s.jsxs)("div",{className:"mt-2 flex items-end justify-between gap-3",children:[(0,s.jsx)("div",{className:"text-lg font-semibold tabular-nums",children:null!=ew&&null!=ey?`${n(ew)} / ${n(ey)}`:"—"}),(0,s.jsx)("div",{className:"text-xs opacity-70 tabular-nums",children:null!=eS?`${eS}%`:""})]}),(0,s.jsx)("div",{className:"mt-1 text-xs opacity-70 tabular-nums",children:null!=ef?`available: ${n(ef)}`:""}),null!=ew&&null!=ey?(0,s.jsx)("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full bg-black/10 dark:bg-white/10",children:(0,s.jsx)("div",{className:"h-full rounded-full bg-emerald-400/70",style:{width:`${eS??0}%`}})}):(0,s.jsx)("div",{className:"mt-2 opacity-70",children:"unavailable"}),eN?.note?(0,s.jsx)("div",{className:"mt-2 text-xs opacity-70",children:eN.note}):null,eN?.breakdown_bytes?(0,s.jsxs)("details",{className:"mt-2 text-xs opacity-70",children:[(0,s.jsx)("summary",{className:"cursor-pointer select-none",children:"breakdown"}),(0,s.jsx)("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1",children:Object.entries(eN.breakdown_bytes).map(([e,a])=>(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70",children:e}),(0,s.jsx)("div",{className:"text-right tabular-nums",children:n(a)||"—"})]},e))})]}):null]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-black/10 bg-black/5 p-4 text-sm dark:border-white/10 dark:bg-white/5",children:[(0,s.jsx)("div",{className:"font-medium opacity-80",children:"API process"}),(0,s.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1",children:[(0,s.jsx)("div",{className:"opacity-70",children:"pid"}),(0,s.jsx)("div",{className:"text-right font-mono",children:ej?.pid??"—"}),(0,s.jsx)("div",{className:"opacity-70",children:"cpu"}),(0,s.jsx)("div",{className:"text-right tabular-nums",children:ej?.cpu_pct!=null?`${ej.cpu_pct.toFixed(1)}%`:"—"}),(0,s.jsx)("div",{className:"opacity-70",children:"rss"}),(0,s.jsx)("div",{className:"text-right tabular-nums",children:((e=ej?.rss_bytes)&&Number.isFinite(e)?`${Math.round(e/1048576)} MB`:"")||"—"})]})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-black/10 bg-black/5 p-4 text-sm dark:border-white/10 dark:bg-white/5",children:[(0,s.jsx)("div",{className:"font-medium opacity-80",children:"Ollama RAM (RSS)"}),e_?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mt-2 flex items-end justify-between gap-3",children:[(0,s.jsx)("div",{className:"text-lg font-semibold tabular-nums",children:n(eP)||"—"}),(0,s.jsx)("div",{className:"text-xs opacity-70 tabular-nums",children:eC.length?`${eC.length} pid`:""})]}),(0,s.jsx)("div",{className:"mt-2 text-xs opacity-70",children:eC.length?`pids: ${eC.join(", ")}`:"set `OLLAMA_PID` to pin a specific process"}),eM.length?(0,s.jsxs)("details",{className:"mt-2 text-xs opacity-70",children:[(0,s.jsx)("summary",{className:"cursor-pointer select-none",children:"per-process"}),(0,s.jsx)("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1",children:eM.map(e=>(0,s.jsxs)("div",{className:"contents",children:[(0,s.jsx)("div",{className:"opacity-70 font-mono",children:e.pid??"—"}),(0,s.jsx)("div",{className:"text-right tabular-nums",children:n(e.rss_bytes)||(e.error?"error":"—")})]},e.pid??Math.random()))})]}):null]}):(0,s.jsx)("div",{className:"mt-2 opacity-70",children:"not detected (set `OLLAMA_PID` to pin)"})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-black/10 bg-black/5 p-4 text-sm dark:border-white/10 dark:bg-white/5",children:[(0,s.jsx)("div",{className:"font-medium opacity-80",children:"GPU"}),(0,s.jsx)("div",{className:"mt-2 opacity-70",children:m?.gpu?.note??"—"})]})]}),(0,s.jsxs)("section",{className:"grid gap-6 lg:grid-cols-2",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-black/10 bg-black/5 p-5 dark:border-white/10 dark:bg-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium opacity-80",children:"Model"}),(0,s.jsx)("div",{className:"text-lg font-semibold",children:en||"—"})]}),(0,s.jsx)("button",{onClick:()=>ex(en),disabled:!en||Z,className:"rounded-lg border border-black/10 bg-black/10 px-3 py-2 text-sm font-medium hover:bg-black/15 disabled:cursor-not-allowed disabled:opacity-50 dark:border-white/10 dark:bg-white/10 dark:hover:bg-white/15",title:"Preload model (keep-alive) to reduce first-token latency",children:"Warm"})]}),(0,s.jsxs)("div",{className:"mt-4 grid gap-3",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("label",{className:"text-sm opacity-80",children:"Installed"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("select",{value:eo.includes(y)?y:"",onChange:e=>f(e.target.value),className:"w-full rounded-lg border border-black/10 bg-[var(--background)] px-3 py-2 text-sm dark:border-white/10",disabled:g,children:[(0,s.jsx)("option",{value:"",children:g?"Loading...":"Select a model"}),eo.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsx)("button",{onClick:eu,className:"shrink-0 rounded-lg border border-black/10 bg-black/5 px-3 py-2 text-sm hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",disabled:g,title:"Refresh model list",children:"↻"})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("label",{className:"text-sm opacity-80",children:"Or type"}),(0,s.jsx)("input",{value:y,onChange:e=>f(e.target.value),className:"w-full rounded-lg border border-black/10 bg-[var(--background)] px-3 py-2 text-sm dark:border-white/10",placeholder:"llama3.2:3b"})]}),ec&&(0,s.jsx)("div",{className:"rounded-xl border border-black/10 bg-black/5 p-3 text-sm dark:border-white/10 dark:bg-white/5",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:[(0,s.jsx)("div",{className:"opacity-70",children:"Size"}),(0,s.jsx)("div",{className:"text-right",children:function(e){if(!e||!Number.isFinite(e))return"";let a=["B","KB","MB","GB","TB"],r=e,s=0;for(;r>=1024&&s<a.length-1;)r/=1024,s++;let t=r>=10||0===s?0:1;return`${r.toFixed(t)} ${a[s]}`}(ec.size)||"—"}),(0,s.jsx)("div",{className:"opacity-70",children:"Family"}),(0,s.jsx)("div",{className:"text-right",children:ec.details?.family||"—"}),(0,s.jsx)("div",{className:"opacity-70",children:"Params"}),(0,s.jsx)("div",{className:"text-right",children:ec.details?.parameter_size||"—"}),(0,s.jsx)("div",{className:"opacity-70",children:"Quant"}),(0,s.jsx)("div",{className:"text-right",children:ec.details?.quantization_level||"—"})]})}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("label",{className:"text-sm opacity-80",children:"Pull model (download)"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{value:S,onChange:e=>_(e.target.value),className:"w-full rounded-lg border border-black/10 bg-[var(--background)] px-3 py-2 text-sm dark:border-white/10",placeholder:"llama3.2:3b",disabled:C}),(0,s.jsx)("button",{onClick:()=>eg(S),disabled:C||!S.trim(),className:"shrink-0 rounded-lg border border-black/10 bg-black/10 px-3 py-2 text-sm font-medium hover:bg-black/15 disabled:cursor-not-allowed disabled:opacity-50 dark:border-white/10 dark:bg-white/10 dark:hover:bg-white/15",children:C?"Pulling...":"Pull"}),C&&(0,s.jsx)("button",{onClick:ep,className:"shrink-0 rounded-lg border border-black/10 bg-black/5 px-3 py-2 text-sm hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",title:"Stop",children:"Stop"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-xs opacity-70",children:"Recommended (one-click pull)"}),(0,s.jsx)("button",{onClick:()=>{_("llama3.1:8b"),eg("llama3.1:8b")},disabled:C,className:"rounded-lg border border-black/10 bg-black/5 px-2 py-1 text-xs hover:bg-black/10 disabled:cursor-not-allowed disabled:opacity-50 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",title:"Quick pull",children:"Pull default"})]}),(0,s.jsx)("div",{className:"grid gap-2",children:l.map(e=>{let a=em.has(e.name);return(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded-xl border border-black/10 bg-black/5 px-3 py-2 text-sm dark:border-white/10 dark:bg-white/5",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,s.jsx)("span",{className:"font-mono text-sm",children:e.name}),a?(0,s.jsx)("span",{className:"rounded-full border border-emerald-500/30 bg-emerald-500/10 px-2 py-0.5 text-xs text-emerald-200",children:"installed"}):(0,s.jsx)("span",{className:"rounded-full border border-black/10 bg-black/5 px-2 py-0.5 text-xs opacity-70 dark:border-white/10 dark:bg-white/5",children:"not installed"})]}),(0,s.jsx)("div",{className:"mt-0.5 text-xs opacity-70",children:e.note})]}),(0,s.jsxs)("div",{className:"flex shrink-0 items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>f(e.name),className:"rounded-lg border border-black/10 bg-black/5 px-2 py-1 text-xs hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",title:"Select for chat",children:"Use"}),(0,s.jsx)("button",{onClick:()=>{_(e.name),eg(e.name)},disabled:C||a,className:"rounded-lg border border-black/10 bg-black/10 px-2 py-1 text-xs hover:bg-black/15 disabled:cursor-not-allowed disabled:opacity-50 dark:border-white/10 dark:bg-white/10 dark:hover:bg-white/15",title:a?"Already installed":"Pull model",children:"Pull"})]})]},e.name)})})]}),(M||null!=$||R)&&(0,s.jsxs)("div",{className:"rounded-xl border border-black/10 bg-black/5 p-3 text-sm dark:border-white/10 dark:bg-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsx)("div",{className:d("font-medium",R&&"text-rose-200"),children:R?"Pull error":"Pull status"}),null!=$&&!R&&(0,s.jsxs)("div",{className:"tabular-nums opacity-80",children:[Math.round(100*$),"%"]})]}),(0,s.jsx)("div",{className:"mt-1 whitespace-pre-wrap opacity-80",children:R??M}),null!=$&&!R&&(0,s.jsx)("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full bg-black/10 dark:bg-white/10",children:(0,s.jsx)("div",{className:"h-full rounded-full bg-emerald-400/70",style:{width:`${Math.round(100*$)}%`}})})]})]}),(0,s.jsxs)("details",{className:"rounded-xl border border-black/10 bg-black/5 p-3 text-sm open:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:open:bg-white/10",children:[(0,s.jsx)("summary",{className:"cursor-pointer select-none font-medium",children:"Generation settings"}),(0,s.jsxs)("div",{className:"mt-3 grid gap-3",children:[(0,s.jsxs)("label",{className:"flex items-center justify-between gap-3 rounded-lg border border-black/10 bg-[var(--background)] px-3 py-2 text-sm dark:border-white/10",children:[(0,s.jsx)("span",{className:"opacity-80",children:"auto switch (unload previous)"}),(0,s.jsx)("input",{type:"checkbox",checked:el,onChange:e=>ed(e.target.checked),className:"h-4 w-4"})]}),(0,s.jsxs)("label",{className:"flex items-center justify-between gap-3 rounded-lg border border-black/10 bg-[var(--background)] px-3 py-2 text-sm dark:border-white/10",children:[(0,s.jsx)("span",{className:"opacity-80",children:"prefer Korean"}),(0,s.jsx)("input",{type:"checkbox",checked:G,onChange:e=>U(e.target.checked),className:"h-4 w-4"})]}),(0,s.jsxs)("label",{className:"flex items-center justify-between gap-3 rounded-lg border border-black/10 bg-[var(--background)] px-3 py-2 text-sm dark:border-white/10",children:[(0,s.jsx)("span",{className:"opacity-80",children:"stream"}),(0,s.jsx)("input",{type:"checkbox",checked:es,onChange:e=>et(e.target.checked),className:"h-4 w-4"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("label",{className:"text-sm opacity-80",children:"keep_alive"}),(0,s.jsx)("input",{value:E,onChange:e=>B(e.target.value),className:"w-full rounded-lg border border-black/10 bg-[var(--background)] px-3 py-2 text-sm dark:border-white/10",placeholder:"30m (or 0 to unload)"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-3",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("label",{className:"text-sm opacity-80",children:"temperature"}),(0,s.jsx)("input",{value:J,onChange:e=>H(e.target.value),className:"w-full rounded-lg border border-black/10 bg-[var(--background)] px-3 py-2 text-sm dark:border-white/10",placeholder:"e.g. 0.7",inputMode:"decimal"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("label",{className:"text-sm opacity-80",children:"top_p"}),(0,s.jsx)("input",{value:K,onChange:e=>L(e.target.value),className:"w-full rounded-lg border border-black/10 bg-[var(--background)] px-3 py-2 text-sm dark:border-white/10",placeholder:"e.g. 0.9",inputMode:"decimal"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("label",{className:"text-sm opacity-80",children:"num_predict"}),(0,s.jsx)("input",{value:D,onChange:e=>z(e.target.value),className:"w-full rounded-lg border border-black/10 bg-[var(--background)] px-3 py-2 text-sm dark:border-white/10",placeholder:"e.g. 256",inputMode:"numeric"})]})]})]})]}),(0,s.jsxs)("div",{className:"text-xs opacity-70",children:["Active model: ",(0,s.jsx)("span",{className:"font-mono",children:N})]})]})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-black/10 bg-black/5 p-5 dark:border-white/10 dark:bg-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium opacity-80",children:"Prompt"}),(0,s.jsx)("div",{className:"text-xs opacity-70",children:"Ctrl/⌘ + Enter to send"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>{Q(""),W(null),er(null),X("")},className:"rounded-lg border border-black/10 bg-black/5 px-3 py-2 text-sm hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",children:"Clear"}),Z?(0,s.jsx)("button",{onClick:()=>{ei.current?.abort(),ee(!1)},className:"rounded-lg border border-black/10 bg-black/5 px-3 py-2 text-sm hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",title:"Stop streaming",children:"Stop"}):null,(0,s.jsx)("button",{onClick:ek,disabled:Z||!q.trim()||!en.trim(),className:"rounded-lg border border-black/10 bg-black/10 px-3 py-2 text-sm font-medium hover:bg-black/15 disabled:cursor-not-allowed disabled:opacity-50 dark:border-white/10 dark:bg-white/10 dark:hover:bg-white/15",children:Z?"Running...":"Send"})]})]}),(0,s.jsx)("textarea",{value:q,onChange:e=>Q(e.target.value),onKeyDown:e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&ek()},rows:10,className:"mt-4 w-full resize-y rounded-xl border border-black/10 bg-[var(--background)] px-3 py-3 text-sm leading-6 outline-none focus:ring-2 focus:ring-emerald-400/40 dark:border-white/10",placeholder:"프롬프트 입력"}),ea&&(0,s.jsxs)("div",{className:"mt-4 rounded-xl border border-rose-500/30 bg-rose-500/10 p-3 text-sm text-rose-200",children:[(0,s.jsx)("div",{className:"font-medium",children:"Error"}),(0,s.jsx)("div",{className:"mt-1 whitespace-pre-wrap opacity-90",children:ea})]}),(V||Y)&&(0,s.jsxs)("div",{className:"mt-4 rounded-2xl border border-black/10 bg-[var(--background)] p-4 dark:border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsx)("div",{className:"text-sm font-semibold",children:"Response"}),(0,s.jsx)("button",{className:"rounded-lg border border-black/10 bg-black/5 px-3 py-1.5 text-sm hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",onClick:()=>navigator.clipboard.writeText(Y||V?.response||V?.raw||""),children:"Copy"})]}),(0,s.jsx)("div",{className:"mt-3 whitespace-pre-wrap text-sm leading-6",children:Y||V?.response||V?.raw||"(empty)"}),V&&ev?.length?(0,s.jsx)("div",{className:"mt-4 grid grid-cols-2 gap-2 sm:grid-cols-3",children:ev.map(e=>(0,s.jsxs)("div",{className:"rounded-xl border border-black/10 bg-black/5 px-3 py-2 text-sm dark:border-white/10 dark:bg-white/5",children:[(0,s.jsx)("div",{className:"text-xs opacity-70",children:e.k}),(0,s.jsx)("div",{className:"mt-0.5 font-medium tabular-nums",children:e.v})]},e.k))}):null,(0,s.jsxs)("details",{className:"mt-4 rounded-xl border border-black/10 bg-black/5 p-3 text-sm dark:border-white/10 dark:bg-white/5",children:[(0,s.jsx)("summary",{className:"cursor-pointer select-none font-medium",children:"Raw JSON"}),(0,s.jsx)("pre",{className:"mt-3 max-h-72 overflow-auto rounded-lg bg-black/5 p-3 text-xs leading-5 dark:bg-white/5",children:JSON.stringify(V,null,2)})]})]})]})]}),(0,s.jsxs)("footer",{className:"text-xs opacity-70",children:["Home: ",(0,s.jsx)("span",{className:"font-mono",children:"/"})," \xb7 Road Vision: ",(0,s.jsx)("span",{className:"font-mono",children:"/road-vision"})," \xb7 API docs:"," ",(0,s.jsx)("span",{className:"font-mono",children:"http://127.0.0.1:8000/docs"})," \xb7 Ollama: ",(0,s.jsx)("span",{className:"font-mono",children:"http://127.0.0.1:11434"})]})]})})}}},e=>{e.O(0,[580,758,358],()=>e(e.s=4065)),_N_E=e.O()}]);