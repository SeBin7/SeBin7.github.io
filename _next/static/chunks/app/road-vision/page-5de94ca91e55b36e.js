(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[944],{1227:(e,s,l)=>{Promise.resolve().then(l.bind(l,9261))},9261:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>M});var t=l(546),r=l(842);function a(...e){return e.filter(Boolean).join(" ")}function n(e,s,l){return Math.max(s,Math.min(l,e))}function i(e){return null!=e&&Number.isFinite(e)?`${Math.round(e)}ms`:"—"}let c=[{key:"decode_ms",label:"decode"},{key:"preproc_ms",label:"preproc"},{key:"pre_resize_ms",label:"pre_resize"},{key:"pre_cvt_ms",label:"pre_cvt"},{key:"pre_edges_ms",label:"pre_edges"},{key:"pre_stack_ms",label:"pre_stack"},{key:"net_ms",label:"net(pipe)"},{key:"h2d_norm_ms",label:"h2d_norm"},{key:"infer_ms",label:"infer"},{key:"total_ms",label:"total"}];function d(e){return null!=e&&Number.isFinite(e)?`${e.toFixed(1)}%`:"—"}function o(e){return null!=e&&Number.isFinite(e)?`${Math.round(e)}MB`:"—"}function u(e){return null!=e&&Number.isFinite(e)?`${Math.round(e)}MHz`:"—"}function m(e){return null!=e&&Number.isFinite(e)?`${e.toFixed(e>=10?0:1)}W`:"—"}function x(e){return null!=e&&Number.isFinite(e)?e.toFixed(e>=10?1:2):"—"}function p(e){if(null==e||!Number.isFinite(e))return"—";let s=e/1024;return`${s.toFixed(s>=10?0:1)}GB`}function h(e){return e?.xpu_busy_pct??e?.xpu_render_busy_pct??e?.render_busy_pct}function _(e){return e?.xpu_busy_src??e?.source}function b(e){return e?.xpu_freq_act_mhz??e?.xpu_freq_mhz}function v(e){return e?.xpu_freq_req_mhz}function g(e,s){let l=e?.engine_util_pct?.[s];return Number.isFinite(Number(l))?Number(l):void 0}function j(e){return g(e,"render_all")??g(e,"render_single")}function N(e){return g(e,"compute_all")}function f(e){return g(e,"copy_all")??g(e,"copy_single")}function y(e){let s=e?.busy_pct;if(Number.isFinite(Number(s)))return Number(s);let l=[j(e),N(e),f(e)].filter(e=>null!=e);return l.length?Math.max(...l):void 0}function k(e){let s=e?.engine_stats_delta;if(!s)return!1;let l=Object.values(s).map(e=>Number(e?.d_activeTime)).filter(e=>Number.isFinite(e));return l.length>0&&l.every(e=>0===e)}function w(e){return e?.xpu_device??e?.device}function z(e){return e?.xpu_engines_busy_pct??e?.engines_busy_pct??null}function $(e){return e?Object.entries(e).map(([e,s])=>[e,Number(s)]).filter(([,e])=>Number.isFinite(e)).sort((e,s)=>s[1]===e[1]?e[0].localeCompare(s[0]):s[1]-e[1]):[]}function S(e){if(null==e||!Number.isFinite(e))return"—";let s=e>1e12?e:e>1e9?1e3*e:null;if(null==s)return String(e);try{return new Date(s).toLocaleString()}catch{return String(e)}}function R(e){return null!=e&&Number.isFinite(e)?n(e,0,100):null}function q(e){return(0,t.jsxs)("div",{className:"rounded-2xl border border-black/10 bg-black/5 p-4 text-sm dark:border-white/10 dark:bg-white/5",children:[(0,t.jsx)("div",{className:"font-medium opacity-80",children:e.title}),(0,t.jsx)("div",{className:"mt-2 text-2xl font-semibold tabular-nums",children:e.value}),e.sub?(0,t.jsx)("div",{className:"mt-1 text-xs opacity-70",children:e.sub}):null,null!=e.pct?(0,t.jsx)("div",{className:"mt-3 h-2 w-full rounded-full bg-black/10 dark:bg-white/10",children:(0,t.jsx)("div",{className:"h-2 rounded-full bg-emerald-500/60",style:{width:`${e.pct}%`}})}):null,e.extra?(0,t.jsx)("div",{className:"mt-2",children:e.extra}):null,e.breakdown?(0,t.jsxs)("details",{className:"mt-2 text-xs opacity-70",children:[(0,t.jsx)("summary",{className:"cursor-pointer select-none",children:e.breakdownLabel??"details"}),(0,t.jsx)("div",{className:"mt-2",children:e.breakdown})]}):null]})}function F(e){return e.length?e.reduce((e,s)=>e+s,0)/e.length:null}function M(){let e,s,l,g=(0,r.useRef)(null),M=(0,r.useRef)(null),E=(0,r.useRef)(null),O=(0,r.useRef)(null),A=(0,r.useRef)(null),C=(0,r.useRef)(!0),L=(0,r.useRef)(null),P=(0,r.useRef)(0),[T,U]=(0,r.useState)(null),[B,D]=(0,r.useState)(null),[H,W]=(0,r.useState)(null),[X,I]=(0,r.useState)(null),[V,K]=(0,r.useState)(null),[Z,G]=(0,r.useState)(null),[J,Q]=(0,r.useState)("sample"),[Y,ee]=(0,r.useState)(null),[es,el]=(0,r.useState)(""),[et,er]=(0,r.useState)(!1),[ea,en]=(0,r.useState)(null),[ei,ec]=(0,r.useState)(null),[ed,eo]=(0,r.useState)([]),[eu,em]=(0,r.useState)(null),[ex,ep]=(0,r.useState)("py_xpu"),[eh,e_]=(0,r.useState)(null),[eb,ev]=(0,r.useState)({window:30,client_total_ms:null,net_ms:null,server_total_ms:null,fps:null}),eg=(0,r.useRef)([]),ej=(0,r.useRef)([]),eN=(0,r.useRef)([]),ef=(0,r.useRef)(!1),ey=(0,r.useRef)(()=>{});async function ek(){D(null);try{let e=await fetch("/api/roadvision/health",{cache:"no-store"}),s=await e.json().catch(()=>({})),l=!!s?.ok;if(U(l),l)s?.note&&D(String(s.note));else{let e=s?.target?`target=${s.target}`:"",l=s?.status!=null?`status=${s.status}`:"",t=s?.error||s?.detail||"remote health check failed";D([t,e,l].filter(Boolean).join(" \xb7 "))}}catch(e){U(!1),D(e?.message??String(e))}}async function ew(e){I(null),K(null);try{let s=await fetch(`/api/roadvision/metrics${e?"?probe=1":""}`,{cache:"no-store"}),l=await s.json().catch(()=>({}));if(G({target:"string"==typeof l?.target?l.target:void 0,path:"string"==typeof l?.path?l.path:void 0,status:"number"==typeof l?.status?l.status:void 0,fetchedAt:Date.now()}),!s.ok||l?.ok===!1){let e=l?.error||l?.detail||`HTTP ${s.status}`,t=l?.target?`target=${l.target}`:"",r=l?.status!=null?`status=${l.status}`:"",a=Number(l?.status??s.status);if([404,405,501].includes(a))return void K(`XPU server does not expose metrics endpoint (${a}); using metrics from /infer only.`);I([e,t,r].filter(Boolean).join(" \xb7 "));return}let t=l?.metrics??null;W(t&&"object"==typeof t?t:null),P.current=Date.now()}catch(e){I(e instanceof Error?e.message:String(e))}}function ez(e){let s=g.current,l=M.current;if(!s||!l)return;let t=s.clientWidth,r=s.clientHeight;if(t<=0||r<=0)return;let a=window.devicePixelRatio||1;l.width=Math.round(t*a),l.height=Math.round(r*a);let n=l.getContext("2d");if(!n)return;n.setTransform(a,0,0,a,0,0),n.clearRect(0,0,t,r);let i=s.videoWidth||t,c=s.videoHeight||r,d=t/i,o=r/c;for(let s of(n.lineWidth=2,n.font="12px ui-sans-serif, system-ui",e)){let e=s.x1*d,l=s.y1*o,t=(s.x2-s.x1)*d,r=(s.y2-s.y1)*o;n.strokeStyle="rgba(16,185,129,0.95)",n.fillStyle="rgba(16,185,129,0.15)",n.strokeRect(e,l,t,r),n.fillRect(e,l,t,r);let a=s.label?`${s.label}${null!=s.score?` ${(100*s.score).toFixed(0)}%`:""}`:null!=s.score?`${(100*s.score).toFixed(0)}%`:"";if(a){n.fillStyle="rgba(0,0,0,0.7)";let s=n.measureText(a).width;n.fillRect(e,Math.max(0,l-16),s+8,16),n.fillStyle="white",n.fillText(a,e+4,Math.max(12,l-4))}}}async function e$(){let e=g.current,s=E.current;if(!e||!s)return;if(e.paused||e.ended){O.current?.abort(),O.current=null,e.ended&&er(!1);return}if(!e.videoWidth||!e.videoHeight||ef.current)return;ef.current=!0,ec(null);let l=eb.window,t=performance.now(),r=null,a=null,i=new AbortController;O.current?.abort(),O.current=i;try{let l=e.videoWidth,c=e.videoHeight;s.width=l,s.height=c;let d=s.getContext("2d");if(!d)throw Error("canvas ctx unavailable");let o=performance.now();d.drawImage(e,0,0,l,c);let u=performance.now(),m=await new Promise((e,l)=>{s.toBlob(s=>s?e(s):l(Error("failed to encode frame")),"image/jpeg",.7)}),x=performance.now(),p=performance.now(),h=await fetch("/api/roadvision/infer",{method:"POST",headers:{"Content-Type":"image/jpeg","X-RV-Backend":ex},body:m,signal:i.signal}),_=await h.json().catch(()=>({})),b=performance.now();if(em(_),_?.metrics&&"object"==typeof _.metrics){let e=Date.now(),s=P.current;s>0&&e-s<2500||null!=L.current||W(_.metrics)}if(a="number"==typeof _?.timing?.total_ms?_.timing.total_ms:null,h.ok&&_?.ok!==!1){let e=function(e,s,l){let t=Array.isArray(e?.detections)?e.detections:Array.isArray(e?.boxes)?e.boxes:Array.isArray(e)?e:[],r=[];for(let e of t){let t=Number(e?.x1??e?.xmin??e?.left??e?.[0]),a=Number(e?.y1??e?.ymin??e?.top??e?.[1]),i=Number(e?.x2??e?.xmax??e?.right??e?.[2]),c=Number(e?.y2??e?.ymax??e?.bottom??e?.[3]);if(![t,a,i,c].every(Number.isFinite))continue;let d=i<=1&&c<=1&&t>=0&&a>=0;r.push({x1:n(d?t*s:t,0,s),y1:n(d?a*l:a,0,l),x2:n(d?i*s:i,0,s),y2:n(d?c*l:c,0,l),label:"string"==typeof e?.label?e.label:"string"==typeof e?.class?e.class:void 0,score:Number.isFinite(Number(e?.score??e?.conf))?Number(e?.score??e?.conf):void 0})}return r}(_,l,c);eo(e),ez(e)}else{let e=_?.error?String(_.error):h.ok?"unknown":`HTTP ${h.status}`,s=[];_?.target&&s.push(`target=${String(_.target)}`),_?.cause&&s.push(`cause=${String(_.cause)}`),h.ok||s.push(`status=${h.status}`),Array.isArray(_?.available_backends)&&s.push(`available=${_.available_backends.join(",")}`),_?.hint&&s.push(`hint=${String(_.hint)}`),ec([`bytes=${m.size}`,`backend=${ex}`,"ok=0",`error=${e}`,...s].join(" \xb7 ")),eo([]),ez([])}r={capture_ms:u-o,encode_ms:x-u,net_ms:b-p,total_ms:performance.now()-t},e_(r)}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;ec(e instanceof Error?e.message:String(e))}finally{O.current===i&&(O.current=null);let e=performance.now()-t;en(Math.round(e)),eg.current.push(e),eg.current.length>l&&eg.current.shift(),r?.net_ms!=null&&(ej.current.push(r.net_ms),ej.current.length>l&&ej.current.shift()),null!=a&&(eN.current.push(a),eN.current.length>l&&eN.current.shift());let s=F(eg.current),n=F(ej.current),c=F(eN.current);ev(e=>({...e,client_total_ms:s,net_ms:n,server_total_ms:c,fps:s?1e3/s:null})),ef.current=!1}}async function eS(e){let s=g.current;s&&(s.pause(),s.srcObject=null,s.crossOrigin="anonymous",s.src=e,s.load(),await s.play(),ey.current=()=>{s.pause(),s.removeAttribute("src"),s.load()})}function eR(){O.current?.abort(),O.current=null,ey.current?.(),er(!1),ec(null),eo([]),em(null),e_(null),eg.current=[],ej.current=[],eN.current=[],ez([])}(0,r.useEffect)(()=>{L.current=H},[H]),(0,r.useEffect)(()=>()=>{es.startsWith("blob:")&&URL.revokeObjectURL(es)},[es]),(0,r.useEffect)(()=>{ek(),ew()},[]),(0,r.useEffect)(()=>(ew(),A.current=window.setInterval(()=>ew(),1e3),()=>{null!=A.current&&window.clearInterval(A.current),A.current=null}),[]),(0,r.useEffect)(()=>{if(!et)return;let e=!1;return(async()=>{let s=Math.max(100,Math.round(1e3/3));for(;!e;)await e$(),await new Promise(e=>setTimeout(e,s))})(),()=>{e=!0,O.current?.abort(),O.current=null}},[et,J]);let eq=H?H.source?.includes("intel_gpu_top")||null!=H.engines_busy_pct||null!=H.xpu_engines_busy_pct||null!=H.render_busy_pct||null!=H.xpu_render_busy_pct||null!=H.xpu_busy_pct||null!=H.xpu_busy_src||null!=H.xpu_freq_mhz||null!=H.xpu_freq_act_mhz||null!=H.xpu_freq_req_mhz||null!=H.xpu_rc6_pct||null!=H.xpu_power_gpu_w||null!=H.xpu_power_pkg_w?H:H.intel_gpu_top?H.intel_gpu_top:null:null,eF=function(e){if(!e)return null;if(e.source?.includes("level_zero")||e.engine_util_pct||e.engine_stats_delta||null!=e.busy_pct)return e;if(e.level_zero_sysman)return e.level_zero_sysman;if(e.level_zero)return e.level_zero;if(e.xpu_ze_engine_util_pct||null!=e.xpu_ze_busy_pct||null!=e.xpu_ze_ok)return{source:"level_zero_sysman",ts:e.ts,ok:e.xpu_ze_ok,busy_pct:e.xpu_ze_busy_pct,engine_util_pct:e.xpu_ze_engine_util_pct,xpu_ze_age_s:e.xpu_ze_age_s,xpu_ze_ok:e.xpu_ze_ok,xpu_ze_freq:e.xpu_ze_freq,xpu_ze_extras_error:e.xpu_ze_extras_error};for(let s of Object.values(e))if(s&&"object"==typeof s&&(s.source?.includes("level_zero")||s.engine_util_pct||s.engine_stats_delta||null!=s.busy_pct))return s;return null}(H),eM=Array.isArray(e=eF?.xpu_ze_freq)&&e.length?e[0]??null:null,eE=(s=eF?.xpu_ze_extras_error)&&"object"==typeof s?Object.keys(s).sort():[];return(0,t.jsx)("main",{className:"min-h-screen bg-[var(--background)] text-[var(--foreground)]",children:(0,t.jsxs)("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-6 px-5 py-10",children:[(0,t.jsxs)("header",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Road Vision (Streaming Demo)"}),(0,t.jsx)("p",{className:"text-sm opacity-80",children:"Browser video → frame capture → XPU inference over Tailscale → overlay"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("a",{href:"/",className:"rounded-lg border border-black/10 bg-black/5 px-3 py-1.5 text-sm hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",children:"Home"}),(0,t.jsx)("a",{href:"/llm",className:"rounded-lg border border-black/10 bg-black/5 px-3 py-1.5 text-sm hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",children:"LLM Demo"}),(0,t.jsxs)("span",{className:a("inline-flex items-center gap-2 rounded-full border px-3 py-1 text-sm",!0===T&&"border-emerald-500/30 bg-emerald-500/10 text-emerald-200",!1===T&&"border-rose-500/30 bg-rose-500/10 text-rose-200",null==T&&"border-black/10 bg-black/5 text-black/60 dark:border-white/10 dark:bg-white/5 dark:text-white/60"),title:B??"",children:["XPU ",!0===T?"OK":!1===T?"DOWN":"…"]}),(0,t.jsx)("button",{onClick:()=>{ek(),C.current=!0,ew(!0)},className:"rounded-lg border border-black/10 bg-black/5 px-3 py-1.5 text-sm hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",children:"Refresh"})]})]}),(B||X||ei)&&(0,t.jsxs)("div",{className:"rounded-xl border border-rose-500/30 bg-rose-500/10 p-3 text-sm text-rose-200",children:[(0,t.jsx)("div",{className:"font-medium",children:"Error"}),(0,t.jsx)("div",{className:"mt-1 whitespace-pre-wrap opacity-90",children:B??X??ei})]})]}),(0,t.jsxs)("section",{children:[(0,t.jsxs)("div",{className:"flex items-end justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium opacity-80",children:"XPU Hardware"}),(0,t.jsx)("div",{className:"mt-1 text-xs opacity-70",children:H?.ts!=null?`updated ${S(H.ts)}`:"updated —"}),Z?.path||Z?.target?(0,t.jsxs)("div",{className:"mt-1 text-xs opacity-70",children:["via ",(0,t.jsx)("span",{className:"font-mono",children:Z.path??"—"})," \xb7"," ",(0,t.jsx)("span",{className:"font-mono",children:Z.target??"—"})]}):null]}),H?(0,t.jsxs)("div",{className:"text-xs opacity-70",children:["source: ",(0,t.jsx)("span",{className:"font-mono",children:"metrics"})]}):(0,t.jsxs)("div",{className:"text-xs opacity-70",children:["enable ",(0,t.jsx)("span",{className:"font-mono",children:"RV_STREAM_METRICS=1"})," on XPU server"]})]}),(0,t.jsxs)("div",{className:"mt-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(q,{title:"CPU (system)",value:d(H?.cpu_sys_pct),pct:R(H?.cpu_sys_pct),sub:[H?.cpu_cores!=null?`cores ${H.cpu_cores}`:null,H?.cpu_load1!=null||H?.cpu_load5!=null||H?.cpu_load15!=null?`load ${x(H?.cpu_load1)} / ${x(H?.cpu_load5)} / ${x(H?.cpu_load15)}`:null].filter(Boolean).join(" \xb7 ")||void 0,breakdownLabel:"details",breakdown:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 font-mono tabular-nums",children:[(0,t.jsx)("div",{className:"opacity-70",children:"cpu_sys_pct"}),(0,t.jsx)("div",{className:"text-right",children:d(H?.cpu_sys_pct)}),(0,t.jsx)("div",{className:"opacity-70",children:"cpu_cores"}),(0,t.jsx)("div",{className:"text-right",children:H?.cpu_cores??"—"}),(0,t.jsx)("div",{className:"opacity-70",children:"cpu_load1"}),(0,t.jsx)("div",{className:"text-right",children:x(H?.cpu_load1)}),(0,t.jsx)("div",{className:"opacity-70",children:"cpu_load5"}),(0,t.jsx)("div",{className:"text-right",children:x(H?.cpu_load5)}),(0,t.jsx)("div",{className:"opacity-70",children:"cpu_load15"}),(0,t.jsx)("div",{className:"text-right",children:x(H?.cpu_load15)})]})}),(0,t.jsx)(q,{title:"RAM (system)",value:H?.mem_used_mb!=null&&H?.mem_total_mb!=null?`${p(H.mem_used_mb)} / ${p(H.mem_total_mb)}`:d(H?.mem_sys_pct),pct:R(H?.mem_sys_pct),sub:[H?.mem_avail_mb!=null?`avail ${p(H.mem_avail_mb)}`:null,H?.swap_used_mb!=null&&H?.swap_total_mb!=null?`swap ${p(H.swap_used_mb)} / ${p(H.swap_total_mb)}`:null].filter(Boolean).join(" \xb7 ")||void 0,breakdownLabel:"details",breakdown:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 font-mono tabular-nums",children:[(0,t.jsx)("div",{className:"opacity-70",children:"mem_sys_pct"}),(0,t.jsx)("div",{className:"text-right",children:d(H?.mem_sys_pct)}),(0,t.jsx)("div",{className:"opacity-70",children:"mem_total_mb"}),(0,t.jsx)("div",{className:"text-right",children:p(H?.mem_total_mb)}),(0,t.jsx)("div",{className:"opacity-70",children:"mem_used_mb"}),(0,t.jsx)("div",{className:"text-right",children:p(H?.mem_used_mb)}),(0,t.jsx)("div",{className:"opacity-70",children:"mem_avail_mb"}),(0,t.jsx)("div",{className:"text-right",children:p(H?.mem_avail_mb)}),(0,t.jsx)("div",{className:"opacity-70",children:"swap_total_mb"}),(0,t.jsx)("div",{className:"text-right",children:p(H?.swap_total_mb)}),(0,t.jsx)("div",{className:"opacity-70",children:"swap_used_mb"}),(0,t.jsx)("div",{className:"text-right",children:p(H?.swap_used_mb)})]})}),(0,t.jsx)(q,{title:"XPU (intel_gpu_top)",value:d(h(eq)??void 0),pct:R(h(eq)??void 0),sub:[_(eq)?`src ${_(eq)}`:null,null!=b(eq)||null!=v(eq)?`freq ${u(b(eq)??void 0)} / ${u(v(eq)??void 0)}`:null,eq?.xpu_rc6_pct!=null?`rc6 ${d(eq.xpu_rc6_pct)}`:null,eq?.xpu_power_gpu_w!=null||eq?.xpu_power_pkg_w!=null?`pwr ${m(eq?.xpu_power_gpu_w)} / ${m(eq?.xpu_power_pkg_w)}`:null,w(eq)?`dev ${w(eq)}`:null,eq?.xpu_period_ms!=null?`period ${Math.round(eq.xpu_period_ms)}ms`:null].filter(Boolean).join(" \xb7 ")||void 0,extra:z(eq)?(0,t.jsx)("div",{className:"mt-2 grid grid-cols-2 gap-x-6 gap-y-1 font-mono text-xs tabular-nums",children:$(z(eq)??void 0).slice(0,4).map(([e,s])=>(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"truncate opacity-70",children:e}),(0,t.jsx)("div",{className:"text-right",children:d(s)})]},e))}):null,breakdownLabel:"details",breakdown:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 font-mono tabular-nums",children:[(0,t.jsx)("div",{className:"opacity-70",children:"util"}),(0,t.jsx)("div",{className:"text-right",children:d(h(eq)??void 0)}),w(eq)?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"device"}),(0,t.jsx)("div",{className:"text-right",children:String(w(eq))})]}):null,null!=b(eq)||null!=v(eq)?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"freq"}),(0,t.jsxs)("div",{className:"text-right",children:[u(b(eq)??void 0)," / ",u(v(eq)??void 0)]})]}):null,eq?.xpu_rc6_pct!=null?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"rc6"}),(0,t.jsx)("div",{className:"text-right",children:d(eq.xpu_rc6_pct)})]}):null,eq?.xpu_power_gpu_w!=null||eq?.xpu_power_pkg_w!=null?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"power"}),(0,t.jsxs)("div",{className:"text-right",children:[m(eq?.xpu_power_gpu_w)," / ",m(eq?.xpu_power_pkg_w)]})]}):null,eq?.xpu_period_ms!=null?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"period"}),(0,t.jsxs)("div",{className:"text-right",children:[Math.round(eq.xpu_period_ms),"ms"]})]}):null]}),z(eq)?(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("div",{className:"text-xs font-medium opacity-70",children:"engines_busy_pct"}),(0,t.jsx)("div",{className:"mt-2 max-h-56 overflow-auto rounded-lg bg-black/5 p-2 font-mono text-xs tabular-nums dark:bg-white/5",children:$(z(eq)??void 0).map(([e,s])=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("span",{className:"truncate opacity-80",children:e}),(0,t.jsx)("span",{children:d(s)})]},e))})]}):(0,t.jsx)("div",{className:"mt-3 text-xs opacity-60",children:"no intel_gpu_top payload"})]})}),(0,t.jsx)(q,{title:"Level Zero",value:d(y(eF)??void 0),pct:R(y(eF)??void 0),sub:[eF?.source==="level_zero_sysman"?"src level_zero_sysman":null,eF?.device_index!=null?`idx ${eF.device_index}`:null,eF?.ok!=null?`ok ${String(eF.ok)}`:null,eF?.xpu_ze_age_s!=null?`age ${Number(eF.xpu_ze_age_s).toFixed(2)}s`:null,eM?.actual_mhz!=null||eM?.request_mhz!=null?`freq ${u(eM?.actual_mhz)} / ${u(eM?.request_mhz)}`:null,eE.length?`extras_err ${eE.join(",")}`:null,null!=j(eF)?`render ${d(j(eF)??void 0)}`:null,null!=N(eF)?`compute ${d(N(eF)??void 0)}`:null,null!=f(eF)?`copy ${d(f(eF)??void 0)}`:null,k(eF)?"sysman inactive":null].filter(Boolean).join(" \xb7 ")||void 0,extra:eF?.engine_util_pct?(0,t.jsx)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 font-mono text-xs tabular-nums",children:$(eF.engine_util_pct).slice(0,6).map(([e,s])=>(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"truncate opacity-70",children:e}),(0,t.jsx)("div",{className:"text-right",children:d(s)})]},e))}):(0,t.jsx)("div",{className:"text-xs opacity-60",children:"no level_zero_sysman payload"}),breakdownLabel:"engines",breakdown:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 font-mono tabular-nums",children:[(0,t.jsx)("div",{className:"opacity-70",children:"util"}),(0,t.jsx)("div",{className:"text-right",children:d(y(eF)??void 0)}),eM?.domain?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"domain"}),(0,t.jsx)("div",{className:"text-right",children:String(eM.domain)})]}):null,eM?.actual_mhz!=null||eM?.request_mhz!=null?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"freq"}),(0,t.jsxs)("div",{className:"text-right",children:[u(eM?.actual_mhz)," / ",u(eM?.request_mhz)]})]}):null,eM?.efficient_mhz!=null?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"efficient"}),(0,t.jsx)("div",{className:"text-right",children:u(eM.efficient_mhz)})]}):null,eF?.device_index!=null?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"device_index"}),(0,t.jsx)("div",{className:"text-right",children:String(eF.device_index)})]}):null,eF?.activity_supported!=null?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"activity_supported"}),(0,t.jsx)("div",{className:"text-right",children:String(eF.activity_supported)})]}):null,k(eF)?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"note"}),(0,t.jsx)("div",{className:"text-right",children:"engine_stats_delta d_activeTime=0 (sysman inactive)"})]}):null]}),eF?.engine_util_pct?(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("div",{className:"text-xs font-medium opacity-70",children:"engine_util_pct"}),(0,t.jsx)("div",{className:"mt-2 max-h-56 overflow-auto rounded-lg bg-black/5 p-2 font-mono text-xs tabular-nums dark:bg-white/5",children:$(eF.engine_util_pct).map(([e,s])=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("span",{className:"truncate opacity-80",children:e}),(0,t.jsx)("span",{children:d(s)})]},e))})]}):(0,t.jsx)("div",{className:"mt-3 text-xs opacity-60",children:"no level_zero_sysman payload"}),eF?.xpu_ze_freq?.length?(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("div",{className:"text-xs font-medium opacity-70",children:"xpu_ze_freq"}),(0,t.jsx)("div",{className:"mt-2 max-h-56 overflow-auto rounded-lg bg-black/5 p-2 font-mono text-xs tabular-nums dark:bg-white/5",children:eF.xpu_ze_freq.map((e,s)=>(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1",children:[(0,t.jsxs)("div",{className:"truncate opacity-70",children:[e.domain??"gpu","#",e.index??s]}),(0,t.jsxs)("div",{className:"text-right",children:[u(e.actual_mhz)," / ",u(e.request_mhz)]})]},`${e.domain??"gpu"}-${s}`))})]}):null,eF?.xpu_ze_extras_error&&Object.keys(eF.xpu_ze_extras_error).length?(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("div",{className:"text-xs font-medium opacity-70",children:"level zero extras (unavailable)"}),(0,t.jsx)("div",{className:"mt-2 rounded-lg bg-black/5 p-2 text-xs opacity-80 dark:bg-white/5",children:Object.entries(eF.xpu_ze_extras_error).map(([e,s])=>(0,t.jsxs)("div",{className:"mt-1 first:mt-0",children:[(0,t.jsx)("span",{className:"font-mono opacity-80",children:e}),": ",(0,t.jsx)("span",{className:"opacity-90",children:String(s)})]},e))})]}):null]})})]}),V||k(eF)?(0,t.jsx)("div",{className:"mt-2 text-xs opacity-70",children:V??"Level Zero sysman engine activity not available (engine_stats_delta d_activeTime=0); intel_gpu_top Render/3D utilization is the reliable source."}):null]}),(0,t.jsxs)("section",{className:"grid gap-6 lg:grid-cols-2",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-black/10 bg-black/5 p-5 dark:border-white/10 dark:bg-white/5",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,t.jsx)("div",{className:"text-sm font-medium opacity-80",children:"Input"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:async()=>{eR();try{if("sample"===J)await eS("/samples/normal_road.mp4");else{if(!es)throw Error("upload a video first");await eS(es)}er(!0)}catch(e){ec(e instanceof Error?e.message:String(e))}},disabled:et||"upload"===J&&!es,className:"rounded-lg border border-black/10 bg-black/10 px-3 py-2 text-sm font-medium hover:bg-black/15 disabled:cursor-not-allowed disabled:opacity-50 dark:border-white/10 dark:bg-white/10 dark:hover:bg-white/15",children:"Start"}),(0,t.jsx)("button",{onClick:eR,disabled:!et,className:"rounded-lg border border-black/10 bg-black/5 px-3 py-2 text-sm hover:bg-black/10 disabled:cursor-not-allowed disabled:opacity-50 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10",children:"Stop"})]})]}),(0,t.jsxs)("div",{className:"mt-4 grid gap-3",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)("label",{className:"text-sm opacity-80",children:"Mode"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{className:a("rounded-lg border px-3 py-2 text-sm","upload"===J?"border-emerald-500/30 bg-emerald-500/10 text-emerald-200":"border-black/10 bg-black/5 hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10"),onClick:()=>Q("upload"),disabled:et,children:"Upload"}),(0,t.jsx)("button",{className:a("rounded-lg border px-3 py-2 text-sm","sample"===J?"border-emerald-500/30 bg-emerald-500/10 text-emerald-200":"border-black/10 bg-black/5 hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10"),onClick:()=>Q("sample"),disabled:et,children:"Sample"})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)("label",{className:"text-sm opacity-80",children:"Backend"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{className:a("rounded-lg border px-3 py-2 text-sm","py_xpu"===ex?"border-emerald-500/30 bg-emerald-500/10 text-emerald-200":"border-black/10 bg-black/5 hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10"),onClick:()=>ep("py_xpu"),disabled:et,children:"py_xpu"}),(0,t.jsx)("button",{className:a("rounded-lg border px-3 py-2 text-sm","py_cpu"===ex?"border-emerald-500/30 bg-emerald-500/10 text-emerald-200":"border-black/10 bg-black/5 hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10"),onClick:()=>ep("py_cpu"),disabled:et,children:"py_cpu"}),(0,t.jsx)("button",{className:a("rounded-lg border px-3 py-2 text-sm","cpp_hybrid"===ex?"border-emerald-500/30 bg-emerald-500/10 text-emerald-200":"border-black/10 bg-black/5 hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10"),onClick:()=>ep("cpp_hybrid"),disabled:et,children:"cpp_hybrid"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)("button",{className:a("rounded-lg border px-3 py-2 text-sm","cpp_cpu"===ex?"border-emerald-500/30 bg-emerald-500/10 text-emerald-200":"border-black/10 bg-black/5 hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10"),onClick:()=>ep("cpp_cpu"),disabled:et,children:"cpp_cpu"}),(0,t.jsx)("button",{className:a("rounded-lg border px-3 py-2 text-sm","cpp_xpu"===ex?"border-emerald-500/30 bg-emerald-500/10 text-emerald-200":"border-black/10 bg-black/5 hover:bg-black/10 dark:border-white/10 dark:bg-white/5 dark:hover:bg-white/10"),onClick:()=>ep("cpp_xpu"),disabled:et,children:"cpp_xpu"})]}),(0,t.jsxs)("div",{className:"text-xs opacity-70",children:["Sent as header: ",(0,t.jsxs)("span",{className:"font-mono",children:["X-RV-Backend: ",ex]})]})]}),"upload"===J?(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)("label",{className:"text-sm opacity-80",children:"Upload video (mp4/webm)"}),(0,t.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{let s=e.target.files?.[0]??null;ee(s),es.startsWith("blob:")&&URL.revokeObjectURL(es),el(s?URL.createObjectURL(s):"")},className:"w-full rounded-lg border border-black/10 bg-[var(--background)] px-3 py-2 text-sm dark:border-white/10",disabled:et}),(0,t.jsx)("div",{className:"text-xs opacity-70",children:Y?(0,t.jsxs)(t.Fragment,{children:["selected: ",(0,t.jsx)("span",{className:"font-mono",children:Y.name})," \xb7"," ",(0,t.jsxs)("span",{className:"font-mono",children:[Math.round(Y.size/1024),"KB"]})]}):"no file selected"})]}):null]})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-black/10 bg-black/5 p-5 dark:border-white/10 dark:bg-white/5",children:[(0,t.jsx)("div",{className:"text-sm font-medium opacity-80",children:"Preview"}),(0,t.jsxs)("div",{className:"relative mt-4 overflow-hidden rounded-xl border border-black/10 bg-black/10 dark:border-white/10 dark:bg-white/5",children:[(0,t.jsx)("video",{ref:g,className:"block h-auto w-full",playsInline:!0,muted:!0}),(0,t.jsx)("canvas",{ref:M,className:"pointer-events-none absolute inset-0 h-full w-full"}),(0,t.jsxs)("div",{className:"pointer-events-none absolute left-3 top-3 rounded-lg border border-black/10 bg-black/60 px-3 py-2 text-xs text-white backdrop-blur dark:border-white/10",children:[(0,t.jsxs)("div",{className:"font-medium",children:[eu?.label??"—"," ",eu?.conf!=null?`(${Number(eu.conf).toFixed(2)}%)`:""]}),(0,t.jsxs)("div",{className:"mt-1 opacity-90",children:["backend: ",(0,t.jsx)("span",{className:"font-mono",children:ex})]}),(0,t.jsxs)("div",{className:"mt-1 opacity-90",children:["fps(avg): ",(0,t.jsx)("span",{className:"font-mono",children:null!=eb.fps?eb.fps.toFixed(2):"—"})]})]})]}),(0,t.jsxs)("div",{className:"mt-4 rounded-xl border border-black/10 bg-[var(--background)] p-3 text-sm dark:border-white/10",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)("div",{className:"font-medium opacity-80",children:"Last result"}),(0,t.jsx)("div",{className:"text-xs opacity-70 tabular-nums",children:eu?.timing?.total_ms!=null?`server ${Math.round(eu.timing.total_ms)}ms`:""})]}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,t.jsxs)("span",{className:"rounded-full border border-black/10 bg-black/5 px-2 py-0.5 text-xs dark:border-white/10 dark:bg-white/5",children:["ok: ",(0,t.jsx)("span",{className:"font-mono",children:String(eu?.ok??"—")})]}),(0,t.jsxs)("span",{className:"rounded-full border border-black/10 bg-black/5 px-2 py-0.5 text-xs dark:border-white/10 dark:bg-white/5",children:["backend: ",(0,t.jsx)("span",{className:"font-mono",children:eu?.backend??"—"})]}),eu?.stage?(0,t.jsxs)("span",{className:"rounded-full border border-black/10 bg-black/5 px-2 py-0.5 text-xs dark:border-white/10 dark:bg-white/5",children:["stage: ",(0,t.jsx)("span",{className:"font-mono",children:eu.stage})]}):null,(0,t.jsxs)("span",{className:"rounded-full border border-black/10 bg-black/5 px-2 py-0.5 text-xs dark:border-white/10 dark:bg-white/5",children:["label: ",(0,t.jsx)("span",{className:"font-mono",children:eu?.label??"—"})]}),(0,t.jsxs)("span",{className:"rounded-full border border-black/10 bg-black/5 px-2 py-0.5 text-xs dark:border-white/10 dark:bg-white/5",children:["conf:"," ",(0,t.jsx)("span",{className:"font-mono",children:eu?.conf!=null?`${Number(eu.conf).toFixed(3)}%`:"—"})]})]}),(0,t.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-2 text-xs",children:[(0,t.jsxs)("div",{className:"rounded-lg border border-black/10 bg-black/5 px-3 py-2 dark:border-white/10 dark:bg-white/5",children:[(0,t.jsx)("div",{className:"opacity-70",title:"현재 프레임 1장의 브라우저 측 측정값 (캡처/인코딩/네트워크 포함)",children:"client"}),(0,t.jsxs)("div",{className:"mt-1 font-mono",children:["total ",i(eh?.total_ms)," \xb7 net ",i(eh?.net_ms)]}),(0,t.jsxs)("div",{className:"mt-1 font-mono",children:["cap ",i(eh?.capture_ms)," \xb7 enc ",i(eh?.encode_ms)]})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-black/10 bg-black/5 px-3 py-2 dark:border-white/10 dark:bg-white/5",children:[(0,t.jsxs)("div",{className:"opacity-70",title:`최근 ${eb.window}프레임의 롤링 평균 (client total/net + server total, fps=1000/avg total)`,children:["avg (",eb.window,")"]}),(0,t.jsxs)("div",{className:"mt-1 font-mono",children:["total ",i(eb.client_total_ms)," \xb7 net ",i(eb.net_ms)]}),(0,t.jsxs)("div",{className:"mt-1 font-mono",children:["server ",i(eb.server_total_ms)," \xb7 fps ",null!=eb.fps?eb.fps.toFixed(2):"—"]})]})]}),eu?.timing?(0,t.jsxs)("details",{className:"mt-3 text-xs",open:!0,children:[(0,t.jsx)("summary",{className:"cursor-pointer select-none opacity-70",children:"timing"}),(0,t.jsx)("div",{className:"mt-2 rounded-lg border border-black/10 bg-black/5 p-3 dark:border-white/10 dark:bg-white/5",children:(0,t.jsx)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 font-mono tabular-nums",children:c.filter(e=>{var s,l;return s=eu.timing,l=e.key,null!=s&&Object.prototype.hasOwnProperty.call(s,l)}).map(e=>{var s,l;return(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:e.label}),(0,t.jsx)("div",{children:(s=eu.timing,l=e.key,i(s?.[l]))})]},e.key)})})})]}):null,H?(0,t.jsxs)("details",{className:"mt-3 text-xs",open:!0,children:[(0,t.jsx)("summary",{className:"cursor-pointer select-none opacity-70",children:"metrics"}),(0,t.jsx)("div",{className:"mt-2 rounded-lg border border-black/10 bg-black/5 p-3 dark:border-white/10 dark:bg-white/5",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 font-mono tabular-nums",children:[null!=H.ts?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"ts"}),(0,t.jsx)("div",{children:S(H.ts)})]}):null,null!=H.cpu_sys_pct?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"cpu_sys"}),(0,t.jsx)("div",{children:d(H.cpu_sys_pct)})]}):null,null!=H.cpu_cores?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"cpu_cores"}),(0,t.jsx)("div",{children:String(H.cpu_cores)})]}):null,null!=H.cpu_load1||null!=H.cpu_load5||null!=H.cpu_load15?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"cpu_load"}),(0,t.jsxs)("div",{children:[x(H.cpu_load1)," / ",x(H.cpu_load5)," / ",x(H.cpu_load15)]})]}):null,null!=H.mem_sys_pct?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"mem_sys"}),(0,t.jsx)("div",{children:d(H.mem_sys_pct)})]}):null,null!=H.mem_total_mb?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"mem_total"}),(0,t.jsx)("div",{children:p(H.mem_total_mb)})]}):null,null!=H.mem_used_mb?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"mem_used"}),(0,t.jsx)("div",{children:p(H.mem_used_mb)})]}):null,null!=H.mem_avail_mb?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"mem_avail"}),(0,t.jsx)("div",{children:p(H.mem_avail_mb)})]}):null,null!=H.swap_total_mb||null!=H.swap_used_mb?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"swap"}),(0,t.jsxs)("div",{children:[p(H.swap_used_mb)," / ",p(H.swap_total_mb)]})]}):null,null!=h(H)?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_busy"}),(0,t.jsx)("div",{children:d(h(H)??void 0)})]}):null,null!=H.xpu_busy_ok?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_busy_ok"}),(0,t.jsx)("div",{children:String(H.xpu_busy_ok)})]}):null,null!=H.xpu_busy_age_s?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_busy_age_s"}),(0,t.jsxs)("div",{children:[Number(H.xpu_busy_age_s).toFixed(2),"s"]})]}):null,eF?.busy_pct!=null||eF?.engine_util_pct!=null?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"lz_busy"}),(0,t.jsx)("div",{children:d(y(eF)??void 0)})]}):null,null!=H.xpu_ze_ok?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_ze_ok"}),(0,t.jsx)("div",{children:String(H.xpu_ze_ok)})]}):null,null!=H.xpu_ze_age_s?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_ze_age_s"}),(0,t.jsxs)("div",{children:[Number(H.xpu_ze_age_s).toFixed(2),"s"]})]}):null,Array.isArray(H.xpu_ze_freq)&&H.xpu_ze_freq.length?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_ze_freq"}),(0,t.jsxs)("div",{children:[u(H.xpu_ze_freq[0]?.actual_mhz)," / ",u(H.xpu_ze_freq[0]?.request_mhz)]})]}):null,H.xpu_ze_extras_error&&Object.keys(H.xpu_ze_extras_error).length?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_ze_extras_error"}),(0,t.jsx)("div",{children:Object.keys(H.xpu_ze_extras_error).sort().join(",")})]}):null,eF?.engine_util_pct?.render_all!=null||eF?.engine_util_pct?.render_single!=null?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"lz_render"}),(0,t.jsx)("div",{children:d(j(eF)??void 0)})]}):null,eF?.engine_util_pct?.compute_all!=null?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"lz_compute"}),(0,t.jsx)("div",{children:d(N(eF)??void 0)})]}):null,eF?.engine_util_pct?.copy_all!=null||eF?.engine_util_pct?.copy_single!=null?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"lz_copy"}),(0,t.jsx)("div",{children:d(f(eF)??void 0)})]}):null,k(eF)?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"lz_note"}),(0,t.jsx)("div",{children:"engine_stats_delta activeTime=0 (sysman inactive)"})]}):null,null!=_(H)?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_busy_src"}),(0,t.jsx)("div",{children:String(_(H))})]}):null,null!=w(H)?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_device"}),(0,t.jsx)("div",{children:String(w(H))})]}):null,null!=b(H)||null!=v(H)?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_freq"}),(0,t.jsxs)("div",{children:[u(b(H)??void 0)," / ",u(v(H)??void 0)]})]}):null,null!=H.xpu_rc6_pct?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_rc6"}),(0,t.jsx)("div",{children:d(H.xpu_rc6_pct)})]}):null,null!=H.xpu_power_gpu_w?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_power_gpu"}),(0,t.jsx)("div",{children:m(H.xpu_power_gpu_w)})]}):null,null!=H.xpu_power_pkg_w?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_power_pkg"}),(0,t.jsx)("div",{children:m(H.xpu_power_pkg_w)})]}):null,null!=H.xpu_period_ms?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_period"}),(0,t.jsxs)("div",{children:[Math.round(H.xpu_period_ms),"ms"]})]}):null,null!=H.xpu_vram_used_mb?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_vram_used"}),(0,t.jsx)("div",{children:o(H.xpu_vram_used_mb)})]}):null,null!=H.xpu_vram_total_mb?(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_vram_total"}),(0,t.jsx)("div",{children:o(H.xpu_vram_total_mb)})]}):null,z(H)||eF?.engine_util_pct?(0,t.jsxs)("div",{className:"col-span-2 mt-2 border-t border-black/10 pt-2 dark:border-white/10",children:[z(H)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"opacity-70",children:"xpu_engines_busy_pct"}),(0,t.jsx)("div",{className:"mt-1 grid grid-cols-2 gap-x-6 gap-y-1",children:(!(l=z(H))?[]:$(l).slice(0,8)).map(([e,s])=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("span",{className:"truncate opacity-80",children:e}),(0,t.jsx)("span",{children:d(s)})]},e))})]}):null,eF?.engine_util_pct?(0,t.jsxs)("div",{className:z(H)?"mt-2 border-t border-black/10 pt-2 dark:border-white/10":"",children:[(0,t.jsx)("div",{className:"opacity-70",children:"level_zero_engine_util_pct"}),(0,t.jsx)("div",{className:"mt-1 grid grid-cols-2 gap-x-6 gap-y-1",children:$(eF.engine_util_pct).slice(0,12).map(([e,s])=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("span",{className:"truncate opacity-80",children:e}),(0,t.jsx)("span",{children:d(s)})]},e))})]}):null]}):null]})})]}):null]}),(0,t.jsxs)("div",{className:"mt-3 text-xs opacity-70",children:["API: ",(0,t.jsx)("span",{className:"font-mono",children:"/api/roadvision/infer"})," (Next server proxies to XPU via ",(0,t.jsx)("span",{className:"font-mono",children:"RV_REMOTE_BASE_URL"}),")"]})]})]}),(0,t.jsx)("canvas",{ref:E,className:"hidden"})]})})}}},e=>{e.O(0,[580,758,358],()=>e(e.s=1227)),_N_E=e.O()}]);